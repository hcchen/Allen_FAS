{"version":3,"sources":["utils/metadata.js","assets/images/logo-black-red.png","constants/api.js","ducks/notifications.js","utils/apiErrors.js","translations/en.js","translations/index.js","utils/fetch.js","utils/validation.js","ducks/utils.js","utils/helpers.js","ducks/config.js","constants/keyboardShortcuts.js","components/Splitter.js","components/Icon.js","components/Accordion.js","ducks/collections.js","containers/Sidebar.js","constants/index.js","containers/Header.js","containers/Notifications.js","containers/App.js","components/FilePreview.js","components/Breadcrumbs.js","components/form/InputSearch.js","ducks/staticfiles.js","containers/views/StaticIndex.js","components/FilePicker.js","components/metadata/MetaTags.js","components/metadata/MetaSimple.js","components/metadata/MetaButtons.js","components/metadata/MetaObjectItem.js","components/metadata/MetaObject.js","components/metadata/MetaArrayItem.js","components/metadata/MetaArray.js","components/metadata/MetaField.js","ducks/metadata.js","ducks/siteMeta.js","containers/MetaFields.js","components/DataGUI.js","components/Editor.js","components/Errors.js","components/Button.js","containers/views/Configuration.js","components/Explorer.js","ducks/pages.js","containers/views/Pages.js","components/form/InputPath.js","components/form/InputTitle.js","utils/highlighter.js","components/MarkdownEditor.js","components/metadata/statics/StaticMetaSimple.js","components/metadata/statics/StaticMetaObjectItem.js","components/metadata/statics/StaticMetaObject.js","components/metadata/statics/StaticMetaArrayItem.js","components/metadata/statics/StaticMetaArray.js","components/metadata/statics/StaticMetaField.js","components/metadata/StaticMetaFields.js","components/MarkdownPageBody.js","containers/views/PageEdit.js","components/CreateMarkdownPage.js","containers/views/PageNew.js","containers/views/Documents.js","containers/views/DocumentEdit.js","containers/views/DocumentNew.js","ducks/datafiles.js","containers/views/DataFiles.js","containers/views/DataFileEdit.js","containers/views/DataFileNew.js","ducks/drafts.js","containers/views/Drafts.js","containers/views/DraftEdit.js","containers/views/DraftNew.js","components/Dropzone.js","containers/views/StaticFiles.js","containers/views/NotFound.js","routes.js","ducks/index.js","store.js","index.js"],"names":["addFieldToMetadata","state","namePrefix","tmpState","cloneDeep","field","eval","undefined","_","isArray","push","new_field_count","metadata","removeFieldFromMetadata","key","length","splice","has","updateMetadataFieldKey","fieldKey","newKey","Object","keys","reduce","result","current","updateMetadataFieldValue","nameAttr","value","convertMetadataField","convertType","moveMetadataArrayItem","srcInd","targetInd","arr","injectDefaultFields","config","path","type","defaults","front_matter","content","e","metafields","each","scope","extend","values","computeFieldType","specialKeys","includes","isObject","module","exports","API","putConfigurationUrl","pagesAPIUrl","directory","pageAPIUrl","filename","draftsAPIUrl","draftAPIUrl","collectionAPIUrl","collection_name","documentAPIUrl","datafilesAPIUrl","datafileAPIUrl","staticfilesAPIUrl","staticfileAPIUrl","addNotification","title","message","level","notification","BadInputError","name","stack","Error","getDeleteMessage","getLeaveMessage","getNotFoundMessage","getOverrideMessage","getParserErrorMessage","getSuccessMessage","getErrorMessage","getUploadSuccessMessage","getUploadErrorMessage","getFetchErrorMessage","getUpdateErrorMessage","getDeleteErrorMessage","getPublishDraftMessage","draftPath","postPath","getTitleRequiredMessage","getFilenameRequiredMessage","getContentRequiredMessage","getFilenameNotValidMessage","sidebar","pages","posts","drafts","datafiles","collections","staticfiles","configuration","labels","save","label","triggeredLabel","create","delete","publish","view","upload","viewToggle","translations","en","get","url","action_success","action_failure","dispatch","fetch","credentials","then","res","json","data","catch","error","put","body","method","error_message","del","id","DATE_FILENAME_MATCHER","FILENAME_MATCHER","validator","validations","messages","errorMessages","validationStr","list","validationArr","split","single","test","validated","filterBySearchInput","input","filter","p","toLowerCase","filterDeleted","item","relative_path","search","clearErrors","validationError","errors","toYAML","obj","isEmpty","yaml","safeDump","indent","capitalize","string","charAt","toUpperCase","substring","toTitleCase","replace","txt","substr","slugify","a","RegExp","join","toString","c","indexOf","getFilenameFromPath","lastIndexOf","getExtensionFromPath","index","preventDefault","event","trimObject","object","acc","trim","JSON","parse","Array","getDocumentTitle","splat","prefix","Boolean","computeRelativePath","fetchConfig","putConfig","source","getState","payload","raw_content","validateConfig","stringify","onEditorChange","Splitter","className","Icon","aria-hidden","Accordion","collapsed","handleClick","setState","this","props","counter","count","icon","minHeight","children","accordionClasses","classnames","panelHeight","style","maxHeight","onClick","renderIndicator","Component","defaultProps","fetchCollections","fetchCollection","fetchDocument","createDocument","collection","validateDocument","generateFilenameFromTitle","omit","preparePayload","putDocument","deleteDocument","date","moment","format","SidebarTranslations","Sidebar","hiddens","collectionItems","map","col","i","activeClassName","to","sidebar_label","itemsCount","hiddenLinks","link","translation","splitterBefore","defaultLinks","jekyll_admin","hidden_links","visibleLinks","difference","links","collectionsPanel","renderCollections","postsPanel","draftsPanel","show_drafts","connect","bindActionCreators","Header","target","process","Notifications","elementStyles","Containers","DefaultStyle","padding","width","textAlign","Title","fontSize","color","NotificationItem","margin","borderRadius","transition","success","backgroundColor","warning","info","Dismiss","top","right","height","border","opacity","notificationSystem","refs","nextProps","position","autoDismiss","ref","notifications","App","updated","isFetching","keyMap","keyboardShortcuts","FilePreview","onClickDelete","window","confirm","file","from_theme","handleClickDelete","node","isImageFile","src","http_url","alt","nodeLink","href","rel","renderFileOverlay","extname","Breadcrumbs","base","nodes","paths","before","slice","InputSearch","handleKeyPress","searchBy","onKeyPress","placeholder","fetchStaticFiles","uploadStaticFiles","files","reader","FileReader","readAsDataURL","onloadend","encoded_content","deleteStaticFile","filterByFilename","sf","StaticIndex","onClickStaticFile","modalView","renderDirectoryListingBtn","renderPreviewNode","utils","FilePicker","showModal","customStyles","overlay","zIndex","paddingTop","paddingRight","paddingLeft","openModal","shutModal","onPickItem","onPick","isOpen","contentLabel","onRequestClose","MetaTags","creators","handleKeyUp","pageTags","createTag","deleteTag","handleOnChange","tagInput","showSuggestions","autoSuggest","closeSuggestions","rectifyTag","tag","rectified","fieldValue","updateFieldValue","clone","tagName","pop","taginput","focus","suggestions","entry","startsWith","tags","suggests","suggestionClasses","visible","onChange","onFocus","onKeyUp","hidden","momentLocalizer","MetaSimple","handleEditableChange","handleDatepickerChange","dateStr","handleEditableBlur","imagepicker","handleLayoutChange","onBlur","dateValue","Date","siteMeta","renderEditable","layouts","defaultValue","renderDatepicker","renderStaticFilePicker","renderTagsInput","renderLayoutPicker","MetaButtons","dropdown","fieldTypes","simple","array","fieldTypeKeys","toggleDropdownState","onConvertClick","parentKey","ftype","onMouseDown","currentType","parentType","onRemoveClick","sortableHandle","dropdownClasses","tabIndex","renderDropdownItems","MetaObjectItem","convertField","updateFieldKey","currentValue","findDOMNode","field_key","removeField","addField","key_prefix","moveArrayItem","CurrentComponent","MetaArray","MetaObject","handleKeyBlur","handleConvertClick","handleRemoveClick","items","MetaArrayItem","data-id","component","options","draggable","group","pull","handle","animation","onEnd","getAttribute","newIndex","Sortable","sortableGroupDecorator","bind","MetaField","select","storeContentFields","updateTitle","updateBody","updatePath","fetchSiteMeta","MetaFields","fields","dataview","isEqual","site","visibleKeys","metafieldsClass","datafields","newWrapper","meta","DataGUI","handleChange","slug","ext","restricted","renderPathFields","Editor","editorChanged","nextState","ace","editor","getValue","mode","theme","showGutter","showPrintMargin","highlightActiveLine","scrollMargin","Errors","iconMap","Button","active","triggered","block","thin","btnClass","iconName","iconNode","Configuration","guiView","routerWillLeave","nextLocation","fieldChanged","toggleView","handleClickSave","router","route","setRouteLeaveHook","keyboardHandlers","handlers","renderContentBody","withRouter","Explorer","deleteItem","params","dir","browserHistory","renderTitleCell","renderDirectoryRow","renderFileRow","newBtnLabel","typeLabel","renderRows","fetchPages","fetchPage","createPage","validatePage","putPage","deletePage","Pages","InputFilename","tooltip","InputTitle","hljs","registerLanguage","require","classNames","MarkdownEditor","_replaceSelectedText","cm","headNTail","startPoint","getCursor","endPoint","text","getSelection","head","tail","replaceSelection","ch","setSelection","handleFilePick","codemirror","insertTexts","image","initialValue","destroy","onSave","opts","codeSyntaxHighlighting","toolbarIcons","action","filepicker","trigger","click","SimpleMDE","on","elementToRemove","container","querySelector","remove","display","StaticMetaSimple","disabled","FieldTypes","StaticMetaArray","StaticMetaObject","StaticMetaObjectItem","StaticMetaArrayItem","StaticMetaField","StaticMetaFields","filteredData","MarkdownPageBody","staticmetafields","PageEdit","new_path","page","front_matter_defaults","document_title","CreateMarkdownPage","onClickSave","metaType","defaultFields","PageNew","Documents","doc","modified_time","documents","renderTable","entries","DocumentEdit","currentDocument","DocumentNew","fetchDataFiles","fetchDataFile","putDataFile","validateDatafile","deleteDataFile","onDataFileChanged","DataFiles","DataFileEdit","datafileChanged","datafile","data_dir","gui","filepath","inputpath","data_path","guiSupport","renderAside","currentFile","DataFileNew","fetchDrafts","fetchDraft","putDraft","validateDraft","deleteDraft","publishDraft","Drafts","DraftEdit","draft","today","datedfilename","goTo","handleClickPublish","DraftNew","Dropzone","ReactDropzone","open","onDrop","onClickItem","multiple","disableClick","StaticFiles","openDropzone","dropzone","uploadedFiles","existingFiles","currentFiles","currentFilenames","cf","chain","existingUploadedFilenames","static_files","dirs","entity","concat","renderFilePreviewRow","NotFound","combineReducers","routing","routerReducer","Math","random","uploading","configureStore","createLogger","initialState","middlewares","thunk","createStore","rootReducer","compose","applyMiddleware","store","history","syncHistoryWithStore","render","routes","from","document","getElementById"],"mappings":"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","file":"static/js/main.dd81e877.chunk.js","sourcesContent":["import _ from 'underscore';\nimport cloneDeep from 'lodash/cloneDeep';\n\n/**\n * Returns the metadata of the state with the new empty field. If the field does\n * not exist, returns the original metadata. Does not mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @return {Object} metadata\n */\nexport const addFieldToMetadata = (state, namePrefix) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${namePrefix}`);\n  if (field === undefined) return tmpState.metadata;\n  if (_.isArray(field)) field.push('');\n  else field[`New field ${state.new_field_count}`] = '';\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the removed key. If the field does not\n * exist, returns the original metadata. Does not mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @param {String} key\n * @return {Object} metadata\n */\nexport const removeFieldFromMetadata = (state, namePrefix, key) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${namePrefix}`);\n  if (field === undefined) return tmpState.metadata;\n  if (_.isArray(field)) {\n    if (key >= field.length) {\n      return tmpState.metadata;\n    }\n    field.splice(key, 1);\n  } else {\n    if (!_.has(field, key)) {\n      return tmpState.metadata;\n    }\n    delete field[key];\n  }\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the updated key. If the field does not\n * exist or the key already exists, returns the original metadata. Does not\n * mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @param {String} fieldKey\n * @param {String} newKey\n * @return {Object} metadata\n */\nexport const updateMetadataFieldKey = (state, namePrefix, fieldKey, newKey) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${namePrefix}`);\n  if (field === undefined) return tmpState.metadata;\n  if (_.has(field, newKey)) return tmpState.metadata;\n  field = Object.keys(field).reduce((result, current) => {\n    if (current === fieldKey) result[newKey] = field[current];\n    else result[current] = field[current];\n    return result;\n  }, {});\n  eval(`tmpState.${namePrefix} = field`);\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the updated value of given path(nameAttr).\n * If the field does not exist, creates a new field. Does not mutate the given state.\n * @param {Object} state\n * @param {String} nameAttr\n * @param {String} value\n * @return {Object} metadata\n */\nexport const updateMetadataFieldValue = (state, nameAttr, value) => {\n  let tmpState = cloneDeep(state);\n  eval(`tmpState.${nameAttr} = value`);\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the converted type of given path(nameAttr).\n * If the field does not exist, returns the original metadata.\n * Does not mutate the given state.\n * @param {Object} state\n * @param {String} nameAttr\n * @param {String} convertType\n * @return {Object} metadata\n */\nexport const convertMetadataField = (state, nameAttr, convertType) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${nameAttr}`);\n  if (field === undefined) return tmpState.metadata;\n  if (convertType === 'array') field = [''];\n  else if (convertType === 'object') {\n    let key = `New field ${state.new_field_count}`;\n    field = { [key]: '' };\n  } else field = '';\n  eval(`tmpState.${nameAttr} = field`);\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the sorted array. Moves the array item to\n * target index, shifts the rest of them. If the given path is not an array,\n * returns the original metadata. Does not mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @param {Number} srcInd\n * @param {Number} targetInd\n * @return {Object} metadata\n */\nexport const moveMetadataArrayItem = (state, namePrefix, srcInd, targetInd) => {\n  let tmpState = cloneDeep(state);\n  let arr = eval(`tmpState.${namePrefix}`);\n  if (!_.isArray(arr)) return tmpState.metadata;\n  arr.splice(targetInd, 0, arr.splice(srcInd, 1)[0]);\n  return tmpState.metadata;\n};\n\n/**\n * Injects the relevant default front matter fields read from the config file into\n * the provided front matter object\n * @param {Object} config\n * @param {String} path\n * @param {String} type\n * @param {Object} front_matter\n * @return {Object} metadata\n */\nexport const injectDefaultFields = (config, path, type, front_matter = {}) => {\n  let defaults;\n  try {\n    defaults = config.content.defaults;\n  } catch (e) {\n    return {};\n  }\n  let metafields = {};\n  _.each(defaults, field => {\n    const scope = field.scope;\n    if (\n      (!scope.type || scope.type === type) &&\n      (!scope.path || scope.path === path)\n    ) {\n      _.extend(metafields, field.values);\n    }\n  });\n  return _.extend(metafields, front_matter);\n};\n\n/**\n * Given a field-value and corresponding key, this utility returns\n * metadata type for the pair.\n * @param {*} value\n * @param {String} key\n * @return {String} type\n */\nexport const computeFieldType = (value, key = null) => {\n  let type = 'simple';\n  const specialKeys = ['tags', 'categories'];\n  if (specialKeys.includes(key) && _.isArray(value)) return type;\n\n  if (_.isObject(value)) type = 'object';\n  if (_.isArray(value)) type = 'array';\n  return type;\n};\n","module.exports = \"data:image/png;base64,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\"","export const API =\n  process.env.NODE_ENV === 'production'\n    ? '/_api'\n    : 'http://localhost:4000/_api';\n\nexport const getSiteMetaUrl = () => `${API}/site_meta`;\n\nexport const getConfigurationUrl = () => `${API}/configuration`;\nexport const putConfigurationUrl = () => `${API}/configuration`;\n\nexport const pagesAPIUrl = (directory = '') => `${API}/pages/${directory}`;\nexport const pageAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/pages/${directory}/${filename}`\n    : `${API}/pages/${filename}`;\n\nexport const draftsAPIUrl = (directory = '') => `${API}/drafts/${directory}`;\nexport const draftAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/drafts/${directory}/${filename}`\n    : `${API}/drafts/${filename}`;\n\nexport const collectionsAPIUrl = () => `${API}/collections`;\nexport const collectionAPIUrl = (collection_name, directory) =>\n  directory\n    ? `${API}/collections/${collection_name}/entries/${directory}`\n    : `${API}/collections/${collection_name}/entries`;\nexport const documentAPIUrl = (collection_name, directory, filename) =>\n  directory\n    ? `${API}/collections/${collection_name}/${directory}/${filename}`\n    : `${API}/collections/${collection_name}/${filename}`;\n\nexport const datafilesAPIUrl = (directory = '') => `${API}/data/${directory}`;\nexport const datafileAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/data/${directory}/${filename}`\n    : `${API}/data/${filename}`;\n\nexport const staticfilesAPIUrl = (directory = '') =>\n  `${API}/static_files/${directory}`;\nexport const staticfileAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/static_files/${directory}/${filename}`\n    : `${API}/static_files/${filename}`;\n","// Action Types\nexport const ADD_NOTIFICATION = 'ADD_NOTIFICATION';\n\n// Actions\nexport const addNotification = (title, message, level) => ({\n  type: ADD_NOTIFICATION,\n  notification: {\n    title,\n    message,\n    level,\n  },\n});\n\n// Reducer\nexport default function notifications(\n  state = {\n    notification: {},\n  },\n  action\n) {\n  switch (action.type) {\n    case ADD_NOTIFICATION:\n      return {\n        ...state,\n        notification: action.notification,\n      };\n    default:\n      return state;\n  }\n}\n","export class BadInputError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'BadInputError';\n    this.message = message || 'Bad input';\n    this.stack = new Error().stack;\n  }\n}\n","// inline messages\nexport const getDeleteMessage = filename =>\n  `Are you sure that you want to delete \"${filename}\" ?`;\n\nexport const getLeaveMessage = () =>\n  'You have unsaved changes on this page. Are you sure you want to leave?';\n\nexport const getNotFoundMessage = type => `No ${type} found.`;\n\nexport const getOverrideMessage = filename =>\n  `${filename} will be overwritten. Continue anyway?`;\n\n// notification messages\nexport const getParserErrorMessage = () => 'Parse Error';\n\nexport const getSuccessMessage = () => 'Success';\n\nexport const getErrorMessage = () => 'Error';\n\nexport const getUploadSuccessMessage = filename =>\n  `${filename} uploaded successfully`;\n\nexport const getUploadErrorMessage = () => `Error occurred uploading the file.`;\n\nexport const getFetchErrorMessage = filename =>\n  `Could not fetch the ${filename}`;\n\nexport const getUpdateErrorMessage = filename =>\n  `Could not update the ${filename}`;\n\nexport const getDeleteErrorMessage = filename =>\n  `Could not delete the ${filename}`;\n\nexport const getPublishDraftMessage = (draftPath, postPath) =>\n  `'${draftPath}' will be converted to '${postPath}'`;\n\n// validation messages\nexport const getTitleRequiredMessage = () => 'The title is required.';\n\nexport const getFilenameRequiredMessage = () => 'The filename is required.';\n\nexport const getContentRequiredMessage = () => 'The content is required.';\n\nexport const getFilenameNotValidMessage = () => 'The filename is not valid.';\n\n// sidebar titles\nexport const sidebar = {\n  pages: 'Pages',\n  posts: 'Posts',\n  drafts: 'Drafts',\n  datafiles: 'Data Files',\n  collections: 'Collections',\n  staticfiles: 'Static Files',\n  configuration: 'Configuration',\n};\n\n// button labels\nexport const labels = {\n  save: {\n    label: 'Save',\n    triggeredLabel: 'Saved',\n  },\n  create: {\n    label: 'Create',\n    triggeredLabel: 'Created',\n  },\n  delete: {\n    label: 'Delete',\n  },\n  publish: {\n    label: 'Publish',\n  },\n  view: {\n    label: 'View',\n  },\n  upload: {\n    label: 'Upload files',\n  },\n  viewToggle: {\n    label: 'Switch View to GUI Editor',\n    triggeredLabel: 'Switch View to Raw Editor',\n  },\n};\n","// TODO:\n// -------------------------------\n// import * as da from './da';\n// import * as es from './es';\n// import * as fr from './fr';\n// import * as ptBr from './ptBr';\n// import * as sv from './sv';\n\nimport * as en from './en';\n\nconst translations = en; // TODO: select language\nexport default translations;\n","import fetch from 'isomorphic-fetch';\nimport { addNotification } from '../ducks/notifications';\nimport { BadInputError } from './apiErrors';\n\nimport translations from '../translations';\nconst {\n  getErrorMessage,\n  getFetchErrorMessage,\n  getUpdateErrorMessage,\n  getDeleteErrorMessage,\n} = translations;\n\n/**\n * Fetch wrapper for GET request that dispatches actions according to the\n * request status\n * @param {String} url\n * @param {Object} action_success\n * @param {Object} action_failure\n * @return {Function} dispatch\n */\nexport const get = (url, action_success, action_failure, dispatch) => {\n  return fetch(url, { credentials: 'same-origin' })\n    .then(res => res.json())\n    .then(data =>\n      dispatch({\n        type: action_success.type,\n        [action_success.name]: data,\n      })\n    )\n    .catch(error => {\n      dispatch({\n        type: action_failure.type,\n        [action_failure.name]: error,\n      });\n      dispatch(\n        addNotification(\n          getErrorMessage(),\n          getFetchErrorMessage(action_success.name),\n          'error'\n        )\n      );\n    });\n};\n\n/**\n * Fetch wrapper for PUT request that dispatches actions according to the\n * request status\n * @param {String} url\n * @param {Object} body\n * @param {Object} action_success\n * @param {Object} action_failure\n * @return {Function} dispatch\n */\nexport const put = (url, body, action_success, action_failure, dispatch) => {\n  return fetch(url, {\n    method: 'PUT',\n    credentials: 'same-origin',\n    body,\n  })\n    .then(res => res.json())\n    .then(data => {\n      if (data.error_message) {\n        throw new BadInputError(data.error_message);\n      }\n      dispatch({\n        type: action_success.type,\n        [action_success.name]: data,\n      });\n    })\n    .catch(error => {\n      dispatch({\n        type: action_failure.type,\n        [action_failure.name]: error,\n      });\n      let error_message =\n        error.name === 'BadInputError'\n          ? error.message\n          : getUpdateErrorMessage(action_success.name);\n      dispatch(addNotification(getErrorMessage(), error_message, 'error'));\n    });\n};\n\n/**\n * Fetch wrapper for DELETE request that dispatches actions according to the\n * request status\n * @param {String} url\n * @param {Object} action_success\n * @param {Object} action_failure\n * @return {Function} dispatch\n */\nexport const del = (url, action_success, action_failure, dispatch) => {\n  return fetch(url, {\n    method: 'DELETE',\n    credentials: 'same-origin',\n  })\n    .then(data =>\n      dispatch({\n        type: action_success.type,\n        id: action_success.id,\n      })\n    )\n    .catch(error => {\n      dispatch({\n        type: action_failure.type,\n        [action_failure.name]: error,\n      });\n      dispatch(\n        addNotification(\n          getErrorMessage(),\n          getDeleteErrorMessage(action_success.name),\n          'error'\n        )\n      );\n    });\n};\n","import _ from 'underscore';\n\nconst DATE_FILENAME_MATCHER = /^(?:.+\\/)*(\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]))-(.*)(\\.[^.]+)$/;\nconst FILENAME_MATCHER = /^(.*)(\\.[^.]+)$/;\n\nconst validated = (field, single) => {\n  switch (single) {\n    case 'required':\n      return !!field;\n    case 'date':\n      return DATE_FILENAME_MATCHER.test(field);\n    case 'filename':\n      return FILENAME_MATCHER.test(field);\n    default:\n      return false;\n  }\n};\n\n/**\n * Returns error messages if the given values does not pass the provided validations.\n * @param {Object} values\n * @param {Object} validations\n * @param {Object} messages\n * @return {Array} errorMessages\n */\nexport const validator = (values, validations, messages) => {\n  let errorMessages = [];\n  _.each(validations, (validationStr, field, list) => {\n    const validationArr = validationStr.split('|');\n    _.each(validationArr, single => {\n      if (!validated(values[field], single)) {\n        errorMessages.push(messages[`${field}.${single}`]);\n      }\n    });\n  });\n  return errorMessages;\n};\n","// Selectors\nexport const filterBySearchInput = (list, input) => {\n  if (input) {\n    return list.filter(p => p.name.toLowerCase().includes(input.toLowerCase()));\n  }\n  return list;\n};\n\nexport const filterDeleted = (list, id) => {\n  return list.filter(item => item.relative_path !== id);\n};\n\n// Action Types\nexport const SEARCH_CONTENT = 'SEARCH_CONTENT';\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\nexport const VALIDATION_ERROR = 'VALIDATION_ERROR';\n\n// Actions\nexport const search = input => ({\n  type: SEARCH_CONTENT,\n  input,\n});\n\nexport const clearErrors = () => ({\n  type: CLEAR_ERRORS,\n});\n\nexport const validationError = errors => ({\n  type: VALIDATION_ERROR,\n  errors,\n});\n\n// Reducer\nexport default function utils(\n  state = {\n    input: '',\n    errors: [],\n  },\n  action\n) {\n  switch (action.type) {\n    case SEARCH_CONTENT:\n      return {\n        ...state,\n        input: action.input,\n      };\n    case CLEAR_ERRORS:\n      return {\n        ...state,\n        errors: [],\n      };\n    case VALIDATION_ERROR:\n      return {\n        ...state,\n        errors: action.errors,\n      };\n    default:\n      return {\n        ...state,\n        input: '',\n      };\n  }\n}\n","import yaml from 'js-yaml';\nimport _ from 'underscore';\n\n/**\n * Converts the object into YAML string.\n * @param {Object} object\n * @return {String} yaml\n */\nexport const toYAML = obj =>\n  !_.isEmpty(obj) ? yaml.safeDump(obj, { indent: 2 }) : '';\n\n/**\n * Converts the YAML string into JS object.\n * @param {String} string\n * @return {Object} obj\n */\nexport const toJSON = yamlString => (yamlString ? yaml.load(yamlString) : {});\n\n/**\n * Capitalize the given string.\n * @param {String} string\n * @return {String} string\n */\nexport const capitalize = string => {\n  if (!string) return '';\n  return string.charAt(0).toUpperCase() + string.substring(1).toLowerCase();\n};\n\n/**\n * Convert the given string into title case format.\n * @param {String} string\n * @return {String} string\n */\nexport const toTitleCase = string => {\n  if (!string) return '';\n  return string.replace(/\\w\\S*/g, txt => {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n};\n\n/**\n * Slugify the given string\n * @param {String} string\n * @return {String} string\n */\nexport const slugify = string => {\n  if (!string) return '';\n  const a = 'àáäâèéëêìíïîıòóöôùúüûñçşßÿœæŕśńṕẃǵğǹḿǘẍźḧ·/_,:;';\n  const b = 'aaaaeeeeiiiiioooouuuuncssyoarsnpwggnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n\n  return string\n    .toString()\n    .toLowerCase()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n    .replace(/&/g, '-') // Replace & with 'and'\n    .replace(/[^\\w-]+/g, '') // Remove all non-word chars\n    .replace(/-+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n};\n\n/**\n * Returns filename from the given path\n * @param {String} path\n * @return {String} filename\n */\nexport const getFilenameFromPath = path => {\n  if (!path) return '';\n  return path.substring(path.lastIndexOf('/') + 1);\n};\n\n/**\n * Returns extension from the given path or filename\n * @param {String} path or filename\n * @return {String} extension or nil\n */\nexport const getExtensionFromPath = path => {\n  if (!path) return '';\n  const filename = getFilenameFromPath(path);\n  const index = filename.lastIndexOf('.');\n\n  if (index > 0) {\n    return filename.substring(index + 1);\n  } else {\n    return '';\n  }\n};\n\n/**\n * returns the uploaded static files that are being overwritten\n * @param {Array} uploadedFiles\n * @param {Array} currentFiles\n * @return {Array} filenames\n */\nexport const existingUploadedFilenames = (uploadedFiles, currentFiles) => {\n  if (\n    (uploadedFiles && !uploadedFiles.length) ||\n    (currentFiles && !currentFiles.length)\n  ) {\n    return [];\n  }\n  const currentFilenames = _.map(currentFiles, cf =>\n    getFilenameFromPath(cf.path)\n  );\n  return _.chain(uploadedFiles)\n    .filter(file => currentFilenames.includes(file.name))\n    .map(file => file.name)\n    .value();\n};\n\n/**\n * Given an Event object, prevents the default event\n * from bubbling, if possible.\n * @param {Event} event\n */\nexport const preventDefault = event => {\n  if (event && event.preventDefault) {\n    event.preventDefault();\n  }\n};\n\n/**\n * Given an object, trims every keys and values recursively.\n * @param {Object} object\n * @return {Object} trimmedObject\n */\nexport const trimObject = object => {\n  if (!_.isObject(object)) return object;\n  return _.keys(object).reduce((acc, key) => {\n    if (typeof object[key] === 'string') {\n      try {\n        acc[key.trim()] = JSON.parse(object[key].trim());\n      } catch (e) {\n        acc[key.trim()] = object[key].trim();\n      }\n    } else {\n      acc[key.trim()] = trimObject(object[key]);\n    }\n    return acc;\n  }, Array.isArray(object) ? [] : {});\n};\n\n/**\n * Given a resource type and splat, returns a formatted title string.\n * Falsy values are discarded.\n * @param {String} type - Resource type.\n * @param {String} splat - Directory splat for current resource.\n * @param {String} [prefix=''] - Optional string text to be placed in front.\n * @return {String} Empty string or formatted title.\n */\nexport const getDocumentTitle = (type, splat, prefix = '') => {\n  if (!type) return '';\n  const label = toTitleCase(type.toString());\n  return [prefix, splat, label].filter(Boolean).join(' | ');\n};\n\n/**\n * @param {String} directory - Directory splat for current resource.\n * @param {String} filename - Basename of current resource.\n * @return {String} Filename or directory splat joined to the filename.\n */\nexport const computeRelativePath = (directory, filename) => {\n  return directory ? `${directory}/${filename}` : `${filename}`;\n};\n","import { getConfigurationUrl, putConfigurationUrl } from '../constants/api';\nimport { get, put } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { CLEAR_ERRORS, validationError } from './utils';\nimport { toYAML } from '../utils/helpers';\n\nimport translations from '../translations';\nconst { getContentRequiredMessage } = translations;\n\n// Action Types\nexport const FETCH_CONFIG_REQUEST = 'FETCH_CONFIG_REQUEST';\nexport const FETCH_CONFIG_SUCCESS = 'FETCH_CONFIG_SUCCESS';\nexport const FETCH_CONFIG_FAILURE = 'FETCH_CONFIG_FAILURE';\nexport const PUT_CONFIG_REQUEST = 'PUT_CONFIG_REQUEST';\nexport const PUT_CONFIG_SUCCESS = 'PUT_CONFIG_SUCCESS';\nexport const PUT_CONFIG_FAILURE = 'PUT_CONFIG_FAILURE';\nexport const CONFIG_EDITOR_CHANGED = 'CONFIG_EDITOR_CHANGED';\n\n// Actions\nexport const fetchConfig = () => dispatch => {\n  dispatch({ type: FETCH_CONFIG_REQUEST });\n  return get(\n    getConfigurationUrl(),\n    { type: FETCH_CONFIG_SUCCESS, name: 'config' },\n    { type: FETCH_CONFIG_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putConfig = (config, source = 'editor') => (\n  dispatch,\n  getState\n) => {\n  let payload;\n\n  if (source === 'gui') {\n    config = getState().metadata.metadata;\n    payload = { raw_content: toYAML(config) };\n  } else {\n    payload = { raw_content: config };\n  }\n\n  // handle errors\n  const errors = validateConfig(config);\n  if (errors.length) {\n    return dispatch(validationError(errors));\n  }\n  dispatch({ type: CLEAR_ERRORS });\n\n  return put(\n    putConfigurationUrl(),\n    JSON.stringify(payload),\n    { type: PUT_CONFIG_SUCCESS, name: 'config' },\n    { type: PUT_CONFIG_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst validateConfig = config =>\n  validator(\n    { config },\n    { config: 'required' },\n    {\n      'config.required': getContentRequiredMessage(),\n    }\n  );\n\nexport const onEditorChange = () => ({\n  type: CONFIG_EDITOR_CHANGED,\n});\n\n// Reducer\nexport default function config(\n  state = {\n    config: {},\n    updated: false,\n    editorChanged: false,\n    fieldChanged: false,\n    isFetching: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_CONFIG_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_CONFIG_SUCCESS:\n      return {\n        ...state,\n        config: action.config,\n        isFetching: false,\n      };\n    case FETCH_CONFIG_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n      };\n    case PUT_CONFIG_SUCCESS:\n      return {\n        ...state,\n        config: action.config,\n        editorChanged: false,\n        updated: true,\n      };\n    case PUT_CONFIG_FAILURE:\n      return {\n        ...state,\n        editorChanged: false,\n      };\n    case CONFIG_EDITOR_CHANGED:\n      return {\n        ...state,\n        editorChanged: true,\n        updated: false,\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n        editorChanged: false,\n      };\n  }\n}\n","export default {\n  save: 'mod+s',\n};\n","import React from 'react';\n\nconst Splitter = () => <div className=\"splitter\" />;\n\nexport default Splitter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function Icon({ name }) {\n  return <i className={`fa fa-${name}`} aria-hidden=\"true\" />;\n}\n\nIcon.propTypes = {\n  name: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Icon from './Icon';\n\nclass Accordion extends Component {\n  state = { collapsed: true };\n\n  handleClick = () => {\n    this.setState(state => {\n      return {\n        collapsed: !state.collapsed,\n      };\n    });\n  };\n\n  renderIndicator() {\n    const { counter, count } = this.props;\n    const { collapsed } = this.state;\n\n    if (collapsed && counter && count) {\n      return <div className=\"counter\">{count}</div>;\n    }\n    return (\n      <div className=\"chevrons\">\n        <Icon name={`chevron-${collapsed ? 'down' : 'up'}`} />\n      </div>\n    );\n  }\n\n  render() {\n    const { icon, label, minHeight, count, children } = this.props;\n    const { collapsed } = this.state;\n    const accordionClasses = classnames('accordion', { collapsed });\n\n    let panelHeight = minHeight;\n    if (!collapsed) {\n      panelHeight = minHeight && count ? (count + 1) * minHeight : 'none';\n    }\n\n    return (\n      <div\n        className={accordionClasses}\n        style={{ maxHeight: panelHeight }}\n        onClick={this.handleClick}\n      >\n        <div className=\"accordion-label\">\n          {icon && <Icon name={icon} />}\n          {label}\n          <div className=\"indicator\">{this.renderIndicator()}</div>\n        </div>\n        {children}\n      </div>\n    );\n  }\n}\n\nAccordion.defaultProps = {\n  minHeight: 50,\n};\n\nAccordion.propTypes = {\n  children: PropTypes.element.isRequired,\n  label: PropTypes.string.isRequired,\n  minHeight: PropTypes.number,\n  count: PropTypes.number,\n  counter: PropTypes.bool,\n  icon: PropTypes.string,\n};\n\nexport default Accordion;\n","import _ from 'underscore';\nimport moment from 'moment';\nimport { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { get, put, del } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { slugify, trimObject, computeRelativePath } from '../utils/helpers';\nimport {\n  collectionsAPIUrl,\n  collectionAPIUrl,\n  documentAPIUrl,\n} from '../constants/api';\n\nimport translations from '../translations';\nconst {\n  getTitleRequiredMessage,\n  getFilenameRequiredMessage,\n  getFilenameNotValidMessage,\n} = translations;\n\n// Action Types\nexport const FETCH_COLLECTIONS_REQUEST = 'FETCH_COLLECTIONS_REQUEST';\nexport const FETCH_COLLECTIONS_SUCCESS = 'FETCH_COLLECTIONS_SUCCESS';\nexport const FETCH_COLLECTIONS_FAILURE = 'FETCH_COLLECTIONS_FAILURE';\nexport const FETCH_COLLECTION_REQUEST = 'FETCH_COLLECTION_REQUEST';\nexport const FETCH_COLLECTION_SUCCESS = 'FETCH_COLLECTION_SUCCESS';\nexport const FETCH_COLLECTION_FAILURE = 'FETCH_COLLECTION_FAILURE';\nexport const FETCH_DOCUMENT_REQUEST = 'FETCH_DOCUMENT_REQUEST';\nexport const FETCH_DOCUMENT_SUCCESS = 'FETCH_DOCUMENT_SUCCESS';\nexport const FETCH_DOCUMENT_FAILURE = 'FETCH_DOCUMENT_FAILURE';\nexport const PUT_DOCUMENT_REQUEST = 'PUT_DOCUMENT_REQUEST';\nexport const PUT_DOCUMENT_SUCCESS = 'PUT_DOCUMENT_SUCCESS';\nexport const PUT_DOCUMENT_FAILURE = 'PUT_DOCUMENT_FAILURE';\nexport const DELETE_DOCUMENT_REQUEST = 'DELETE_DOCUMENT_REQUEST';\nexport const DELETE_DOCUMENT_SUCCESS = 'DELETE_DOCUMENT_SUCCESS';\nexport const DELETE_DOCUMENT_FAILURE = 'DELETE_DOCUMENT_FAILURE';\n\n// Actions\nexport const fetchCollections = () => dispatch => {\n  dispatch({ type: FETCH_COLLECTIONS_REQUEST });\n  return get(\n    collectionsAPIUrl(),\n    { type: FETCH_COLLECTIONS_SUCCESS, name: 'collections' },\n    { type: FETCH_COLLECTIONS_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchCollection = (\n  collection_name,\n  directory = ''\n) => dispatch => {\n  dispatch({ type: FETCH_COLLECTION_REQUEST });\n  return get(\n    collectionAPIUrl(collection_name, directory),\n    { type: FETCH_COLLECTION_SUCCESS, name: 'entries' },\n    { type: FETCH_COLLECTION_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchDocument = (\n  collection_name,\n  directory,\n  filename\n) => dispatch => {\n  dispatch({ type: FETCH_DOCUMENT_REQUEST });\n  return get(\n    documentAPIUrl(collection_name, directory, filename),\n    { type: FETCH_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: FETCH_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const createDocument = (collection, directory) => (\n  dispatch,\n  getState\n) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if ((!path || `${path}/` === directory) && title) {\n    path = generateFilenameFromTitle(metadata, collection); // override empty path\n  } else {\n    // validate otherwise\n    const errors = validateDocument(metadata, collection);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  // send the put request\n  return put(\n    // create or update document according to filename existence\n    documentAPIUrl(collection, directory, path),\n    preparePayload({ raw_content, front_matter }),\n    { type: PUT_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: PUT_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putDocument = (collection, directory, filename) => (\n  dispatch,\n  getState\n) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if ((!path || `${path}/` === directory) && title) {\n    path = generateFilenameFromTitle(metadata, collection); // override empty path\n  } else {\n    // validate otherwise\n    const errors = validateDocument(metadata, collection);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  // add collection type prefix to relative path\n  const relative_path = directory\n    ? `_${collection}/${directory}/${path}`\n    : `_${collection}/${path}`;\n  // send the put request\n  return put(\n    // create or update document according to filename existence\n    documentAPIUrl(collection, directory, filename),\n    preparePayload({ path: relative_path, raw_content, front_matter }),\n    { type: PUT_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: PUT_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deleteDocument = (collection, directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    documentAPIUrl(collection, directory, filename),\n    { type: DELETE_DOCUMENT_SUCCESS, name: 'doc', id: relative_path },\n    { type: DELETE_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst generateFilenameFromTitle = (metadata, collection) => {\n  if (collection === 'posts') {\n    // if date is provided, use it, otherwise generate it with today's date\n    let date;\n    if (metadata.date) {\n      date = metadata.date.split(' ')[0];\n    } else {\n      date = moment().format('YYYY-MM-DD');\n    }\n    return `${date}-${slugify(metadata.title)}.md`;\n  }\n  return `${slugify(metadata.title)}.md`;\n};\n\nconst validateDocument = (metadata, collection) => {\n  let validations = { title: 'required' }; // base validations\n  // base messages\n  let messages = {\n    'title.required': getTitleRequiredMessage(),\n    'path.required': getFilenameRequiredMessage(),\n  };\n\n  if (collection === 'posts') {\n    validations['path'] = 'required|date';\n    messages['path.date'] = getFilenameNotValidMessage();\n  } else {\n    validations['path'] = 'required|filename';\n    messages['path.filename'] = getFilenameNotValidMessage();\n  }\n  return validator(metadata, validations, messages);\n};\n\nconst preparePayload = obj => JSON.stringify(trimObject(obj));\n\n// Reducer\nexport default function collections(\n  state = {\n    collections: [],\n    entries: [],\n    currentDocument: {},\n    isFetching: false,\n    updated: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_COLLECTIONS_REQUEST:\n    case FETCH_COLLECTION_REQUEST:\n    case FETCH_DOCUMENT_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_COLLECTIONS_SUCCESS:\n      return {\n        ...state,\n        collections: action.collections,\n        isFetching: false,\n      };\n    case FETCH_COLLECTION_SUCCESS:\n      return {\n        ...state,\n        entries: action.entries,\n        isFetching: false,\n      };\n    case FETCH_DOCUMENT_SUCCESS:\n      return {\n        ...state,\n        currentDocument: action.doc,\n        isFetching: false,\n      };\n    case FETCH_COLLECTIONS_FAILURE:\n      return {\n        ...state,\n        collections: [],\n        isFetching: false,\n      };\n    case FETCH_COLLECTION_FAILURE:\n      return {\n        ...state,\n        entries: [],\n        isFetching: false,\n      };\n    case FETCH_DOCUMENT_FAILURE:\n      return {\n        ...state,\n        currentDocument: {},\n        isFetching: false,\n      };\n    case PUT_DOCUMENT_SUCCESS:\n      return {\n        ...state,\n        currentDocument: action.doc,\n        updated: true,\n      };\n    case DELETE_DOCUMENT_SUCCESS:\n      return {\n        ...state,\n        entries: filterDeleted(state.entries, action.id),\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n      };\n  }\n}\n\n// Selectors\nexport const filterBySearchInput = (list, input) => {\n  if (!list) {\n    return [];\n  }\n  if (input) {\n    return _.filter(list, item => {\n      if (item.type) {\n        return item.name.toLowerCase().includes(input.toLowerCase());\n      } else {\n        return item.title.toLowerCase().includes(input.toLowerCase());\n      }\n    });\n  }\n  return list;\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Link } from 'react-router';\nimport { ADMIN_PREFIX } from '../constants';\nimport Splitter from '../components/Splitter';\nimport Icon from '../components/Icon';\nimport Accordion from '../components/Accordion';\nimport { fetchCollections } from '../ducks/collections';\nimport { capitalize } from '../utils/helpers';\nimport _ from 'underscore';\n\nimport translations from '../translations';\nconst SidebarTranslations = translations.sidebar;\n\nexport class Sidebar extends Component {\n  componentDidMount() {\n    const { fetchCollections } = this.props;\n    fetchCollections();\n  }\n\n  renderCollections(hiddens = []) {\n    const { collections } = this.props;\n\n    if (!collections.length) {\n      return null;\n    }\n\n    const collectionItems = _.map(collections, (col, i) => {\n      if (col.label !== 'posts' && !hiddens.includes(col.label)) {\n        return (\n          <li key={i}>\n            <Link\n              activeClassName=\"active\"\n              to={`${ADMIN_PREFIX}/collections/${col.label}`}\n            >\n              <Icon name=\"book\" />\n              {col.sidebar_label || capitalize(col.label)}\n            </Link>\n          </li>\n        );\n      }\n    }).filter(Boolean);\n\n    const itemsCount = collectionItems.length;\n    if (!itemsCount) {\n      return null;\n    }\n\n    return (\n      <Accordion\n        count={itemsCount}\n        icon=\"briefcase\"\n        label={SidebarTranslations.collections}\n        counter\n      >\n        <ul>{collectionItems}</ul>\n      </Accordion>\n    );\n  }\n\n  render() {\n    const { config } = this.props;\n\n    const defaults = {\n      pages: {\n        icon: 'file-text',\n        link: 'pages',\n        translation: 'pages',\n      },\n      datafiles: {\n        icon: 'database',\n        link: 'datafiles',\n        translation: 'datafiles',\n        splitterBefore: true,\n      },\n      staticfiles: {\n        icon: 'file',\n        link: 'staticfiles',\n        translation: 'staticfiles',\n      },\n      configuration: {\n        icon: 'cog',\n        link: 'configuration',\n        translation: 'configuration',\n        splitterBefore: true,\n      },\n    };\n\n    const defaultLinks = _.keys(defaults);\n    let hiddenLinks;\n\n    try {\n      hiddenLinks = config.jekyll_admin.hidden_links || [];\n    } catch (e) {\n      hiddenLinks = [];\n    }\n\n    const visibleLinks = _.difference(defaultLinks, hiddenLinks);\n\n    const links = [];\n    _.each(visibleLinks, (link, index, list) => {\n      const current = defaults[link];\n      if (current.splitterBefore) {\n        links.push(<Splitter key={'splitter' + index} />);\n      }\n      links.push(\n        <li key={index}>\n          <Link activeClassName=\"active\" to={`${ADMIN_PREFIX}/${current.link}`}>\n            <Icon name={current.icon} />\n            {SidebarTranslations[current.translation]}\n          </Link>\n        </li>\n      );\n    });\n\n    const collectionsPanel = this.renderCollections(hiddenLinks);\n    const postsPanel = !hiddenLinks.includes('posts');\n    const draftsPanel = config && config.show_drafts;\n\n    return (\n      <div className=\"sidebar\">\n        <Link className=\"logo\" to={`${ADMIN_PREFIX}/pages`} />\n        <ul className=\"routes\">\n          {collectionsPanel}\n          {postsPanel && (\n            <li>\n              <Link\n                activeClassName=\"active\"\n                to={`${ADMIN_PREFIX}/collections/posts`}\n              >\n                <Icon name=\"book\" />\n                {SidebarTranslations.posts}\n              </Link>\n            </li>\n          )}\n          {draftsPanel && (\n            <li>\n              <Link activeClassName=\"active\" to={`${ADMIN_PREFIX}/drafts`}>\n                <Icon name=\"edit\" />\n                {SidebarTranslations.drafts}\n              </Link>\n            </li>\n          )}\n          {(collectionsPanel || postsPanel || draftsPanel) && <Splitter />}\n          {links}\n        </ul>\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  collections: PropTypes.array.isRequired,\n  fetchCollections: PropTypes.func.isRequired,\n  config: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  collections: state.collections.collections,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchCollections,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\n","export const ADMIN_PREFIX = '/admin';\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport Icon from '../components/Icon';\n\nexport class Header extends Component {\n  render() {\n    const { config } = this.props;\n    return (\n      <div className=\"header\">\n        <h3 className=\"title\">\n          <Link target=\"_blank\" to={config.url || '/'}>\n            <Icon name=\"home\" />\n            <span>{config.title || 'You have no title!'}</span>\n          </Link>\n        </h3>\n        <span className=\"version\">v{process.env.REACT_APP_VERSION}</span>\n      </div>\n    );\n  }\n}\n\nHeader.propTypes = {\n  config: PropTypes.object.isRequired,\n};\n\nexport default Header;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport NotificationSystem from 'react-notification-system';\n\nexport class Notifications extends Component {\n  componentDidMount() {\n    this.notificationSystem = this.refs.notificationSystem;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { notification } = nextProps;\n    this.notificationSystem.addNotification({\n      title: notification.title,\n      message: notification.message,\n      level: notification.level,\n      position: 'br',\n      autoDismiss: 10,\n    });\n  }\n\n  elementStyles = {\n    Containers: {\n      DefaultStyle: {\n        padding: 15,\n        width: 360,\n        textAlign: 'center',\n      },\n    },\n    Title: {\n      DefaultStyle: {\n        fontSize: 21,\n        color: '#fff',\n      },\n    },\n    NotificationItem: {\n      DefaultStyle: {\n        margin: 0,\n        padding: '9px 15px 15px',\n        fontSize: 15,\n        borderRadius: 0,\n        transition: '0.5s ease-in-out',\n      },\n      success: {\n        color: '#fff',\n        backgroundColor: '#088217',\n      },\n      error: {\n        color: '#fff',\n        backgroundColor: '#e21414',\n      },\n      warning: {\n        color: '#fff',\n        backgroundColor: '#ebad1a',\n      },\n      info: {\n        color: '#fff',\n        backgroundColor: '#369cc7',\n      },\n    },\n    Dismiss: {\n      DefaultStyle: {\n        top: 7,\n        right: 9,\n        width: 25,\n        height: 25,\n        padding: 4,\n        backgroundColor: 'transparent',\n        border: '2px solid',\n        opacity: '0.84',\n      },\n    },\n  };\n\n  render() {\n    return (\n      <NotificationSystem ref=\"notificationSystem\" style={this.elementStyles} />\n    );\n  }\n}\n\nNotifications.propTypes = {\n  notification: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  notification: state.notifications.notification,\n});\n\nexport default connect(mapStateToProps)(Notifications);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\n\nimport { fetchConfig } from '../ducks/config';\nimport keyboardShortcuts from '../constants/keyboardShortcuts';\n\n// Components\nimport Sidebar from './Sidebar';\nimport Header from './Header';\nimport Notifications from './Notifications';\n\nclass App extends Component {\n  componentDidMount() {\n    const { fetchConfig } = this.props;\n    fetchConfig();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const { fetchConfig } = this.props;\n      fetchConfig();\n    }\n  }\n\n  render() {\n    const { config, isFetching } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    return (\n      <DocumentTitle title=\"Jekyll Admin\">\n        <HotKeys keyMap={keyboardShortcuts} className=\"wrapper\">\n          {config.content && (\n            <div>\n              <Sidebar config={config.content} />\n              <div className=\"container\">\n                <Header config={config.content} />\n                <div className=\"content\">{this.props.children}</div>\n              </div>\n              <Notifications />\n            </div>\n          )}\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nApp.propTypes = {\n  children: PropTypes.element,\n  fetchConfig: PropTypes.func.isRequired,\n  config: PropTypes.object.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  updated: PropTypes.bool,\n};\n\nconst mapStateToProps = state => ({\n  config: state.config.config,\n  updated: state.config.updated,\n  isFetching: state.config.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ fetchConfig }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getFilenameFromPath } from '../utils/helpers';\nimport Icon from './Icon';\n\nimport translations from '../translations';\nconst { getDeleteMessage } = translations;\n\nexport default class FilePreview extends Component {\n  handleClickDelete(path) {\n    const { splat, onClickDelete } = this.props;\n    const filename = getFilenameFromPath(path);\n    const confirm = window.confirm(getDeleteMessage(path));\n    confirm && onClickDelete(splat, filename);\n  }\n\n  renderFileOverlay(file, splat) {\n    if (file.from_theme) {\n      return (\n        <span className=\"theme-indicator\" title=\"Theme Asset\">\n          <Icon name=\"diamond\" />\n        </span>\n      );\n    } else if (splat !== 'index') {\n      return (\n        <button\n          onClick={() => this.handleClickDelete(file.relative_path)}\n          className=\"delete\"\n          title=\"Delete file\"\n        >\n          x\n        </button>\n      );\n    }\n  }\n\n  get isImageFile() {\n    const {\n      file: { type, extname },\n    } = this.props;\n    if (type === 'directory') {\n      return false;\n    }\n\n    return /png|jpg|gif|jpeg|svg|ico/i.test(extname.substring(1));\n  }\n\n  render() {\n    const { onClick, file, splat } = this.props;\n    const node = this.isImageFile ? (\n      <img src={file.http_url} alt={file.relative_path} />\n    ) : (\n      <div>\n        <Icon name=\"file-text-o\" />\n      </div>\n    );\n\n    const nodeLink = onClick ? (\n      <a onClick={() => onClick(file.relative_path)}>{node}</a>\n    ) : (\n      <a href={file.http_url} target=\"_blank\" rel=\"noopener noreferrer\">\n        {node}\n      </a>\n    );\n\n    const filename = splat === 'index' ? file.relative_path : file.name;\n\n    return (\n      <div className=\"file-preview\">\n        {this.renderFileOverlay(file, splat)}\n        {nodeLink}\n        <span className=\"filename\">{filename}</span>\n      </div>\n    );\n  }\n}\n\nFilePreview.propTypes = {\n  file: PropTypes.object.isRequired,\n  splat: PropTypes.string.isRequired,\n  onClickDelete: PropTypes.func,\n  onClick: PropTypes.func,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { toTitleCase } from '../utils/helpers';\nimport { ADMIN_PREFIX } from '../constants';\n\nexport default function Breadcrumbs({ type, splat = '' }) {\n  const nonCollectionTypes = ['pages', 'datafiles', 'drafts', 'staticfiles'];\n  const base = nonCollectionTypes.includes(type)\n    ? `${ADMIN_PREFIX}/${type}`\n    : `${ADMIN_PREFIX}/collections/${type}`;\n\n  let label = type;\n  if (type === 'datafiles') {\n    label = 'data files';\n  } else if (type === 'staticfiles') {\n    label = 'static files';\n  }\n\n  let nodes = [];\n  if (splat) {\n    const paths = splat.split('/');\n    nodes = paths.map((path, i) => {\n      const before = i === 0 ? '' : paths.slice(0, i).join('/') + '/';\n      return (\n        <li key={i}>\n          <Link to={`${base}/${before}${path}`}>{path}</Link>\n        </li>\n      );\n    });\n  }\n\n  return (\n    <ul className=\"breadcrumbs\">\n      <li>\n        <Link to={base}>{toTitleCase(label)}</Link>\n      </li>\n      {nodes}\n    </ul>\n  );\n}\n\nBreadcrumbs.propTypes = {\n  type: PropTypes.string.isRequired,\n  splat: PropTypes.string,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InputSearch extends Component {\n  handleKeyPress = event => {\n    const { search } = this.props;\n    search(event.target.value);\n  };\n\n  render() {\n    const { searchBy } = this.props;\n    return (\n      <input\n        onKeyPress={this.handleKeyPress}\n        type=\"text\"\n        className=\"field\"\n        placeholder={`Search by ${searchBy}`}\n      />\n    );\n  }\n}\n\nInputSearch.propTypes = {\n  search: PropTypes.func.isRequired,\n  searchBy: PropTypes.string.isRequired,\n};\n","import _ from 'underscore';\nimport { filterDeleted } from './utils';\nimport { get, del } from '../utils/fetch';\nimport { computeRelativePath } from '../utils/helpers';\nimport { addNotification } from './notifications';\nimport { staticfilesAPIUrl, staticfileAPIUrl } from '../constants/api';\n\nimport translations from '../translations';\nconst {\n  getSuccessMessage,\n  getErrorMessage,\n  getUploadSuccessMessage,\n  getUploadErrorMessage,\n} = translations;\n\n// Action Types\nexport const FETCH_STATICFILES_REQUEST = 'FETCH_STATICFILES_REQUEST';\nexport const FETCH_STATICFILES_SUCCESS = 'FETCH_STATICFILES_SUCCESS';\nexport const FETCH_STATICFILES_FAILURE = 'FETCH_STATICFILES_FAILURE';\nexport const FETCH_STATICFILE_REQUEST = 'FETCH_STATICFILE_REQUEST';\nexport const FETCH_STATICFILE_SUCCESS = 'FETCH_STATICFILE_SUCCESS';\nexport const FETCH_STATICFILE_FAILURE = 'FETCH_STATICFILE_FAILURE';\nexport const PUT_STATICFILE_REQUEST = 'PUT_STATICFILE_REQUEST';\nexport const PUT_STATICFILE_SUCCESS = 'PUT_STATICFILE_SUCCESS';\nexport const PUT_STATICFILE_FAILURE = 'PUT_STATICFILE_FAILURE';\nexport const DELETE_STATICFILE_REQUEST = 'DELETE_STATICFILE_REQUEST';\nexport const DELETE_STATICFILE_SUCCESS = 'DELETE_STATICFILE_SUCCESS';\nexport const DELETE_STATICFILE_FAILURE = 'DELETE_STATICFILE_FAILURE';\n\n// Actions\nexport const fetchStaticFiles = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_STATICFILES_REQUEST });\n  return get(\n    staticfilesAPIUrl(directory),\n    { type: FETCH_STATICFILES_SUCCESS, name: 'files' },\n    { type: FETCH_STATICFILES_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const uploadStaticFiles = (directory, files) => dispatch => {\n  _.each(files, file => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      const payload = JSON.stringify({\n        encoded_content: reader.result.split('base64,')[1],\n      });\n      // send the put request\n      return fetch(staticfileAPIUrl(directory, file.name), {\n        method: 'PUT',\n        body: payload,\n        credentials: 'same-origin',\n      })\n        .then(data => {\n          dispatch({ type: PUT_STATICFILE_SUCCESS });\n          dispatch(fetchStaticFiles(directory));\n          dispatch(\n            addNotification(\n              getSuccessMessage(),\n              getUploadSuccessMessage(file.name),\n              'success'\n            )\n          );\n        })\n        .catch(error => {\n          dispatch({\n            type: PUT_STATICFILE_FAILURE,\n            error,\n          });\n          dispatch(\n            addNotification(getErrorMessage(), getUploadErrorMessage(), 'error')\n          );\n        });\n    };\n  });\n};\n\nexport const deleteStaticFile = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    staticfileAPIUrl(directory, filename),\n    { type: DELETE_STATICFILE_SUCCESS, name: 'file', id: relative_path },\n    { type: DELETE_STATICFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\n// Reducer\nexport default function staticfiles(\n  state = {\n    files: [],\n    isFetching: false,\n    uploading: false, // TODO show loading gif\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_STATICFILES_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_STATICFILES_SUCCESS:\n      return {\n        ...state,\n        files: action.files,\n        isFetching: false,\n      };\n    case FETCH_STATICFILES_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n      };\n    case PUT_STATICFILE_REQUEST:\n      return {\n        ...state,\n        uploading: true,\n      };\n    case PUT_STATICFILE_SUCCESS:\n      return {\n        ...state,\n        uploading: false,\n      };\n    case PUT_STATICFILE_FAILURE:\n      return {\n        ...state,\n        uploading: false,\n      };\n    case DELETE_STATICFILE_SUCCESS:\n      return {\n        ...state,\n        files: filterDeleted(state.files, action.id),\n      };\n    default:\n      return state;\n  }\n}\n\n// Selectors\nexport const filterByFilename = (staticfiles, input) => {\n  if (input) {\n    return staticfiles.filter(sf =>\n      sf.path.toLowerCase().includes(input.toLowerCase())\n    );\n  }\n  return staticfiles;\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Icon from '../../components/Icon';\nimport FilePreview from '../../components/FilePreview';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputSearch from '../../components/form/InputSearch';\nimport { search } from '../../ducks/utils';\nimport { fetchStaticFiles, filterByFilename } from '../../ducks/staticfiles';\nimport { ADMIN_PREFIX } from '../../constants';\n\nexport class StaticIndex extends Component {\n  componentDidMount() {\n    const { fetchStaticFiles } = this.props;\n    fetchStaticFiles('index');\n  }\n\n  renderDirectoryListingBtn() {\n    const to = `${ADMIN_PREFIX}/staticfiles`;\n\n    return (\n      <div className=\"page-buttons\">\n        <Link className=\"btn btn-view\" to={to}>\n          Directory Listing\n        </Link>\n      </div>\n    );\n  }\n\n  renderPreviewNode() {\n    const { files, onClickStaticFile } = this.props;\n\n    if (files.length) {\n      return (\n        <div className=\"preview-container\">\n          {files.map((file, i) => {\n            return (\n              <FilePreview\n                key={i}\n                onClick={onClickStaticFile}\n                splat=\"index\"\n                file={file}\n              />\n            );\n          })}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"preview-info\">\n          <Icon name=\"exclamation-triangle\" />\n          <h2>No files found!</h2>\n          <h4>\n            Upload files at 'Directory Listing' to have them displayed here.\n          </h4>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const { isFetching, search, modalView } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    return (\n      <DocumentTitle title=\"Static File Listing\">\n        <div>\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"staticfiles\" />\n            {!modalView && this.renderDirectoryListingBtn()}\n            <div className=\"pull-right\">\n              <InputSearch searchBy=\"filename\" search={search} />\n            </div>\n          </div>\n          <div className=\"static-list\">{this.renderPreviewNode()}</div>\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n\nStaticIndex.propTypes = {\n  files: PropTypes.array.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  fetchStaticFiles: PropTypes.func.isRequired,\n  search: PropTypes.func.isRequired,\n  onClickStaticFile: PropTypes.func,\n  modalView: PropTypes.bool,\n};\n\nconst mapStateToProps = state => ({\n  files: filterByFilename(state.staticfiles.files, state.utils.input),\n  isFetching: state.staticfiles.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchStaticFiles,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StaticIndex);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'react-modal';\nimport StaticIndex from '../containers/views/StaticIndex';\nimport Icon from './Icon';\n\nexport default class FilePicker extends Component {\n  state = {\n    showModal: false,\n  };\n\n  customStyles = {\n    overlay: {\n      backgroundColor: 'rgba(0,0,0,0.6)',\n      zIndex: 10,\n    },\n    content: {\n      margin: 20,\n      paddingTop: 0,\n      paddingRight: 10,\n      paddingLeft: 15,\n    },\n  };\n\n  openModal = () => this.setState({ showModal: true });\n  shutModal = () => this.setState({ showModal: false });\n\n  onPickItem = path => {\n    this.props.onPick(path);\n    this.shutModal();\n  };\n\n  render() {\n    return (\n      <span className=\"images-wrapper\">\n        <button onClick={this.openModal} ref=\"trigger\">\n          <Icon name=\"picture-o\" />\n        </button>\n        <Modal\n          isOpen={this.state.showModal}\n          contentLabel=\"FilePicker\"\n          onRequestClose={this.shutModal}\n          style={this.customStyles}\n        >\n          <div className=\"content\">\n            <StaticIndex onClickStaticFile={this.onPickItem} modalView />\n          </div>\n        </Modal>\n      </span>\n    );\n  }\n}\n\nFilePicker.propTypes = {\n  onPick: PropTypes.func.isRequired,\n};\n","import React, { Component, PropTypes } from 'react';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport classnames from 'classnames';\n\nimport translations from '../../translations';\nconst { getDeleteMessage } = translations;\n\nexport default class MetaTags extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tagInput: '',\n      pageTags: props.fieldValue || [],\n      autoSuggest: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fieldValue } = nextProps;\n    this.setState({ pageTags: fieldValue || [] });\n  }\n\n  componentDidUpdate() {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, this.state.pageTags);\n  }\n\n  createTag(value) {\n    const { pageTags } = this.state;\n    const clone = [...pageTags];\n\n    // create tags only if they do not exist already\n    if (!clone.includes(value)) {\n      clone.push(value);\n\n      this.setState(state => {\n        return {\n          pageTags: clone,\n          tagInput: '',\n          autoSuggest: false,\n        };\n      });\n    }\n  }\n\n  deleteTag(index) {\n    const { pageTags } = this.state;\n    const clone = [...pageTags];\n\n    const tagName = index === -1 ? clone.slice(-1).pop() : clone[index];\n    const confirm = window.confirm(getDeleteMessage(`tag: ${tagName}`));\n\n    if (confirm) {\n      clone.splice(index, 1);\n      this.setState({ pageTags: clone });\n      this.refs.taginput.focus();\n    }\n  }\n\n  // keys that when pressed and released creates a new tag from the input value.\n  creators = [',', ' ', 'Enter'];\n\n  handleKeyUp = e => {\n    const { pageTags } = this.state;\n    const input = e.target.value;\n\n    if (input.length && this.creators.includes(e.key)) {\n      this.createTag(input);\n    } else if (pageTags.length && input.length === 0 && e.key === 'Backspace') {\n      this.deleteTag(-1);\n    }\n  };\n\n  handleOnChange = e => {\n    const value = e.target.value;\n    this.setState(state => {\n      return { tagInput: value };\n    });\n  };\n\n  showSuggestions = () => {\n    this.setState(state => {\n      return { autoSuggest: true };\n    });\n  };\n\n  closeSuggestions = () => {\n    this.setState(state => {\n      return { autoSuggest: false };\n    });\n  };\n\n  rectifyTag = tag => {\n    const rectified = tag.toString().split(' ');\n    this.setState(state => {\n      return { pageTags: rectified };\n    });\n  };\n\n  render() {\n    const { pageTags } = this.state;\n    const tagInput = `${this.state.tagInput}`;\n\n    const suggestions = this.props.suggestions.filter(entry => {\n      return entry.startsWith(tagInput);\n    });\n\n    if (!(pageTags instanceof Array)) {\n      return (\n        <span className=\"meta-error\">\n          Expected an array of items. Found: <strong>{pageTags}</strong>\n          <br />\n          <span onClick={() => this.rectifyTag(pageTags)}>Click here</span>\n          to correct.\n        </span>\n      );\n    }\n\n    const tagPool = pageTags.filter(Boolean); // filter out nil or empty elements\n    const tags = tagPool.map((tag, i) => {\n      return (\n        <span key={i} className=\"tag\">\n          {tag}\n          <span className=\"delete-tag\" onClick={() => this.deleteTag(i)} />\n        </span>\n      );\n    });\n\n    const suggests = suggestions.map((item, i) => {\n      if (!pageTags.includes(item)) {\n        return (\n          <li key={i} onClick={() => this.createTag(item)}>\n            {item}\n          </li>\n        );\n      }\n      return null;\n    }).filter(Boolean);\n\n    const suggestionClasses = classnames('tag-suggestions', {\n      visible: this.state.autoSuggest,\n    });\n\n    return (\n      <div className=\"tags-wrap field value-field\">\n        {tags.length > 0 && <div className=\"tags-list\">{tags}</div>}\n\n        <div className=\"tags-input\">\n          <input\n            type=\"text\"\n            onChange={this.handleOnChange}\n            onFocus={this.showSuggestions}\n            onKeyUp={this.handleKeyUp}\n            value={tagInput.replace(/,|\\s+/, '')}\n            ref=\"taginput\"\n          />\n\n          <TextareaAutosize\n            className=\"field value-field\"\n            value={this.state.pageTags.toString()}\n            hidden\n          />\n        </div>\n        {suggests.length > 0 && (\n          <div className={suggestionClasses}>\n            <ul>{suggests}</ul>\n            <div className=\"close-suggestions\" onClick={this.closeSuggestions}>\n              Close suggestions\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nMetaTags.defaultProps = {\n  fieldValue: [],\n  suggestions: [],\n};\n\nMetaTags.propTypes = {\n  updateFieldValue: PropTypes.func.isRequired,\n  nameAttr: PropTypes.any.isRequired,\n  suggestions: PropTypes.array,\n  fieldValue: PropTypes.any,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker';\nimport DropdownList from 'react-widgets/lib/DropdownList';\nimport moment from 'moment';\nimport momentLocalizer from 'react-widgets-moment';\nimport FilePicker from '../FilePicker';\nimport MetaTags from './MetaTags';\nimport 'react-widgets/dist/css/react-widgets.css';\n\nmomentLocalizer(moment);\n\nexport class MetaSimple extends Component {\n  handleEditableChange = e => {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, e.target.value);\n  };\n\n  handleDatepickerChange = (date, dateStr) => {\n    const { nameAttr, updateFieldValue } = this.props;\n    let formatted = moment(date).format('YYYY-MM-DD HH:mm:ss');\n    updateFieldValue(nameAttr, formatted);\n  };\n\n  handleEditableBlur = e => {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, e.target.value.trim());\n  };\n\n  renderEditable() {\n    const { fieldValue } = this.props;\n    return (\n      <TextareaAutosize\n        onChange={this.handleEditableChange}\n        onBlur={this.handleEditableBlur}\n        className=\"field value-field\"\n        value={`${fieldValue}`}\n      />\n    );\n  }\n\n  renderDatepicker() {\n    const { fieldValue } = this.props;\n    let dateValue = new Date(fieldValue);\n    if (`${dateValue}` === 'Invalid Date') dateValue = null;\n    return (\n      <DateTimePicker\n        onChange={this.handleDatepickerChange}\n        className=\"date-field\"\n        value={dateValue}\n      />\n    );\n  }\n\n  onPickItem = path => {\n    const { nameAttr, updateFieldValue } = this.props;\n    this.refs.imagepicker.value = path;\n    updateFieldValue(nameAttr, path);\n  };\n\n  renderStaticFilePicker() {\n    const { fieldValue } = this.props;\n    return (\n      <div className=\"imagepicker\">\n        <TextareaAutosize\n          onChange={this.handleEditableChange}\n          className=\"field value-field\"\n          value={fieldValue}\n          ref=\"imagepicker\"\n        />\n        <FilePicker onPick={this.onPickItem} />\n      </div>\n    );\n  }\n\n  handleLayoutChange = value => {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, value);\n  };\n\n  renderLayoutPicker() {\n    const { fieldValue, siteMeta } = this.props;\n\n    if (!siteMeta) return this.renderEditable();\n    const layouts = siteMeta.layouts || [];\n\n    return (\n      <DropdownList\n        className=\"layout-field\"\n        data={['none', ...layouts]}\n        defaultValue={fieldValue}\n        onChange={this.handleLayoutChange}\n      />\n    );\n  }\n\n  renderTagsInput(key) {\n    const { fieldValue, nameAttr, updateFieldValue, siteMeta } = this.props;\n    const suggestions = (siteMeta && siteMeta[key]) || [];\n\n    return (\n      <MetaTags\n        fieldValue={fieldValue}\n        nameAttr={nameAttr}\n        updateFieldValue={updateFieldValue}\n        suggestions={suggestions}\n      />\n    );\n  }\n\n  render() {\n    const { fieldKey, nameAttr } = this.props;\n\n    let node;\n    switch (fieldKey) {\n      case 'date':\n        node = this.renderDatepicker();\n        break;\n      case 'image':\n      case 'file':\n        node = this.renderStaticFilePicker();\n        break;\n      case 'tags':\n      case 'categories':\n        node = this.renderTagsInput(fieldKey);\n        break;\n      default:\n        node = this.renderEditable();\n    }\n\n    if (nameAttr === \"metadata['layout']\") {\n      node = this.renderLayoutPicker();\n    }\n\n    return <div className=\"meta-value\">{node}</div>;\n  }\n}\n\nMetaSimple.propTypes = {\n  parentType: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any,\n  updateFieldValue: PropTypes.func.isRequired,\n  nameAttr: PropTypes.any.isRequired,\n  siteMeta: PropTypes.object,\n};\n\nexport default MetaSimple;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Icon from '../Icon';\n\nexport default class MetaButtons extends Component {\n  state = {\n    dropdown: false,\n  };\n\n  fieldTypes = {\n    simple: {\n      icon: 'pencil',\n      label: 'Simple',\n    },\n    array: {\n      icon: 'list-ol',\n      label: 'List',\n    },\n    object: {\n      icon: 'th-large',\n      label: 'Object',\n    },\n  };\n\n  fieldTypeKeys = Object.keys(this.fieldTypes);\n\n  toggleDropdownState = () => {\n    this.setState(state => {\n      return { dropdown: !state.dropdown };\n    });\n  };\n\n  renderDropdownItems(type) {\n    const { onConvertClick, parentKey } = this.props;\n\n    if (parentKey === 'tags') return null;\n\n    return this.fieldTypeKeys.map((ftype, i) => {\n      if (type !== ftype) {\n        const { icon, label } = this.fieldTypes[ftype];\n        return (\n          <span key={i} onMouseDown={() => onConvertClick(ftype)}>\n            <Icon name={icon} />\n            Convert to {label}\n          </span>\n        );\n      }\n\n      return null;\n    }).filter(Boolean);\n  }\n\n  render() {\n    const { currentType, parentType, onRemoveClick } = this.props;\n    const sortableHandle = (\n      <span className=\"move\">\n        <Icon name=\"arrows\" />\n      </span>\n    );\n\n    const dropdownClasses = classnames('dropdown', {\n      'showing-dropdown': this.state.dropdown,\n    });\n\n    return (\n      <div className=\"meta-buttons\">\n        {parentType === 'array' && sortableHandle}\n        <span className={dropdownClasses}>\n          <a\n            className=\"meta-button\"\n            tabIndex=\"1\"\n            onClick={this.toggleDropdownState}\n            onBlur={() => this.setState({ dropdown: false })}\n          >\n            <Icon name=\"chevron-down\" />\n          </a>\n          <div className=\"dropdown-wrap\">\n            {this.renderDropdownItems(currentType)}\n            <span onMouseDown={() => onRemoveClick()} className=\"remove-field\">\n              <Icon name=\"trash-o\" />\n              Remove field\n            </span>\n          </div>\n        </span>\n      </div>\n    );\n  }\n}\n\nMetaButtons.propTypes = {\n  currentType: PropTypes.string.isRequired,\n  parentType: PropTypes.string.isRequired,\n  onConvertClick: PropTypes.func.isRequired,\n  onRemoveClick: PropTypes.func.isRequired,\n  parentKey: PropTypes.string,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport MetaArray from './MetaArray';\nimport MetaObject from './MetaObject';\nimport MetaSimple from './MetaSimple';\nimport MetaButtons from './MetaButtons';\n\nexport class MetaObjectItem extends Component {\n  handleConvertClick(type) {\n    const { convertField, nameAttr } = this.props;\n    convertField(nameAttr, type);\n  }\n\n  handleKeyBlur() {\n    const { namePrefix, fieldKey, updateFieldKey } = this.props;\n    let currentValue = findDOMNode(this.refs.field_key).value;\n    if (fieldKey !== currentValue && currentValue !== '') {\n      updateFieldKey(namePrefix, fieldKey, currentValue);\n    }\n  }\n\n  handleRemoveClick() {\n    const { removeField, namePrefix, fieldKey } = this.props;\n    removeField(namePrefix, fieldKey);\n  }\n\n  render() {\n    const {\n      type,\n      fieldKey,\n      fieldValue,\n      nameAttr,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      convertField,\n      key_prefix,\n      moveArrayItem,\n    } = this.props;\n    const FieldTypes = {\n      array: MetaArray,\n      object: MetaObject,\n      simple: MetaSimple,\n    };\n    const CurrentComponent = FieldTypes[type];\n    return (\n      <div ref=\"wrap\" className=\"object-item-wrap\">\n        <div className={`object-key ${type}`}>\n          <input\n            ref=\"field_key\"\n            onBlur={e => this.handleKeyBlur(e)}\n            defaultValue={fieldKey}\n            className=\"field key-field\"\n            type=\"text\"\n            placeholder=\"Key\"\n          />\n          <MetaButtons\n            currentType={type}\n            parentType=\"object\"\n            onConvertClick={type => this.handleConvertClick(type)}\n            onRemoveClick={() => this.handleRemoveClick()}\n          />\n        </div>\n        <div className=\"object-value\">\n          <CurrentComponent\n            key_prefix={key_prefix}\n            parentType=\"object\"\n            fieldKey={fieldKey}\n            fieldValue={fieldValue}\n            addField={addField}\n            removeField={removeField}\n            updateFieldKey={updateFieldKey}\n            updateFieldValue={updateFieldValue}\n            moveArrayItem={moveArrayItem}\n            convertField={convertField}\n            nameAttr={nameAttr}\n            namePrefix={nameAttr}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nMetaObjectItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\nexport default MetaObjectItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\nimport MetaObjectItem from './MetaObjectItem';\nimport { computeFieldType } from '../../utils/metadata';\n\nexport class MetaObject extends Component {\n  render() {\n    const {\n      fieldKey,\n      fieldValue,\n      namePrefix,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      convertField,\n      key_prefix,\n      moveArrayItem,\n    } = this.props;\n    const items = _.map(fieldValue, (value, key) => {\n      const type = computeFieldType(value, key);\n      return (\n        <MetaObjectItem\n          key={key}\n          key_prefix={key_prefix}\n          fieldKey={key}\n          fieldValue={value}\n          type={type}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`${namePrefix}['${key}']`}\n          namePrefix={namePrefix}\n        />\n      );\n    });\n    return (\n      <div className=\"meta-value-object\">\n        {items}\n        <a\n          onClick={() => addField(namePrefix)}\n          className=\"add-field-object\"\n          title=\"Add new key/value pair\"\n        >\n          New key/value pair under <strong>{fieldKey}</strong>\n        </a>\n      </div>\n    );\n  }\n}\n\nMetaObject.propTypes = {\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\n\nexport default MetaObject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MetaArray from './MetaArray';\nimport MetaObject from './MetaObject';\nimport MetaSimple from './MetaSimple';\nimport MetaButtons from './MetaButtons';\n\nexport class MetaArrayItem extends Component {\n  handleConvertClick(type) {\n    const { convertField, nameAttr } = this.props;\n    convertField(nameAttr, type);\n  }\n\n  handleRemoveClick() {\n    const { removeField, namePrefix, index } = this.props;\n    removeField(namePrefix, index);\n  }\n\n  render() {\n    const {\n      type,\n      fieldKey,\n      fieldValue,\n      index,\n      nameAttr,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n    } = this.props;\n    const FieldTypes = {\n      array: MetaArray,\n      object: MetaObject,\n      simple: MetaSimple,\n    };\n    const CurrentComponent = FieldTypes[type];\n    return (\n      <div ref=\"wrap\" data-id={index} className=\"array-item-wrap\">\n        <div className=\"array\">\n          <div className=\"array-header\">\n            <span className=\"array-field-num\">{index + 1}.</span>\n            <MetaButtons\n              currentType={type}\n              parentType=\"array\"\n              onConvertClick={type => this.handleConvertClick(type)}\n              onRemoveClick={() => this.handleRemoveClick()}\n            />\n          </div>\n          <CurrentComponent\n            key_prefix={key_prefix}\n            parentType=\"array\"\n            fieldKey={fieldKey}\n            fieldValue={fieldValue}\n            addField={addField}\n            removeField={removeField}\n            updateFieldKey={updateFieldKey}\n            updateFieldValue={updateFieldValue}\n            moveArrayItem={moveArrayItem}\n            convertField={convertField}\n            nameAttr={nameAttr}\n            namePrefix={nameAttr}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nMetaArrayItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\n\nexport default MetaArrayItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Sortable from 'sortablejs';\nimport Icon from '../Icon';\nimport MetaArrayItem from './MetaArrayItem';\nimport { computeFieldType } from '../../utils/metadata';\n\nexport class MetaArray extends Component {\n  sortableGroupDecorator(component) {\n    const { moveArrayItem, namePrefix } = this.props;\n    if (component) {\n      const options = {\n        draggable: '.array-item-wrap',\n        group: { name: 'meta-array-items', pull: false, put: false },\n        handle: '.move',\n        animation: 0,\n        onEnd: e => {\n          let srcInd = e.item.getAttribute('data-id');\n          moveArrayItem(namePrefix, srcInd, e.newIndex);\n        },\n      };\n      Sortable.create(component, options);\n    }\n  }\n\n  render() {\n    const {\n      fieldKey,\n      fieldValue,\n      namePrefix,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n    } = this.props;\n    const items = fieldValue.map((item, i) => {\n      const type = computeFieldType(item);\n      return (\n        <MetaArrayItem\n          key={`${key_prefix}-${i}`}\n          key_prefix={key_prefix}\n          index={i}\n          fieldKey={fieldKey}\n          fieldValue={item}\n          type={type}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`${namePrefix}[${i}]`}\n          namePrefix={namePrefix}\n        />\n      );\n    });\n    return (\n      <div\n        className=\"meta-value-array\"\n        ref={this.sortableGroupDecorator.bind(this)}\n      >\n        {items}\n        <a\n          onClick={() => addField(namePrefix)}\n          className=\"add-field-array\"\n          title=\"Add new list item\"\n        >\n          <Icon name=\"plus\" />\n        </a>\n      </div>\n    );\n  }\n}\n\nMetaArray.propTypes = {\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\n\nexport default MetaArray;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport MetaArray from './MetaArray';\nimport MetaObject from './MetaObject';\nimport MetaSimple from './MetaSimple';\nimport MetaButtons from './MetaButtons';\n\nexport class MetaField extends Component {\n  componentDidMount() {\n    const isNewField = /New field/.test(this.props.fieldKey);\n    isNewField && this.refs.field_key.select();\n  }\n\n  handleConvertClick(type) {\n    const { convertField, nameAttr } = this.props;\n    convertField(nameAttr, type);\n  }\n\n  handleKeyBlur() {\n    const { namePrefix, fieldKey, updateFieldKey } = this.props;\n    let currentValue = findDOMNode(this.refs.field_key).value;\n    if (fieldKey !== currentValue && currentValue !== '') {\n      updateFieldKey(namePrefix, fieldKey, currentValue);\n    }\n  }\n\n  handleRemoveClick() {\n    const { removeField, namePrefix, fieldKey } = this.props;\n    removeField(namePrefix, fieldKey);\n  }\n\n  render() {\n    const {\n      type,\n      parentType,\n      fieldKey,\n      fieldValue,\n      namePrefix,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n      siteMeta,\n    } = this.props;\n\n    const FieldTypes = {\n      array: MetaArray,\n      object: MetaObject,\n      simple: MetaSimple,\n    };\n    const CurrentComponent = FieldTypes[type];\n    return (\n      <div ref=\"wrap\" className=\"metafield\">\n        <div className={`meta-key ${type}`}>\n          <input\n            ref=\"field_key\"\n            onBlur={() => this.handleKeyBlur()}\n            defaultValue={fieldKey}\n            className=\"field key-field\"\n            type=\"text\"\n            placeholder=\"Key\"\n          />\n          <MetaButtons\n            currentType={type}\n            parentType=\"top\"\n            parentKey={fieldKey}\n            onConvertClick={type => this.handleConvertClick(type)}\n            onRemoveClick={() => this.handleRemoveClick()}\n          />\n        </div>\n        <CurrentComponent\n          key_prefix={key_prefix}\n          fieldKey={fieldKey}\n          parentType={parentType}\n          fieldValue={fieldValue}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`${namePrefix}['${fieldKey}']`}\n          namePrefix={`${namePrefix}['${fieldKey}']`}\n          siteMeta={siteMeta}\n        />\n      </div>\n    );\n  }\n}\n\nMetaField.propTypes = {\n  type: PropTypes.string.isRequired,\n  parentType: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n  siteMeta: PropTypes.object,\n};\n\nexport default MetaField;\n","import {\n  addFieldToMetadata,\n  removeFieldFromMetadata,\n  updateMetadataFieldKey,\n  updateMetadataFieldValue,\n  moveMetadataArrayItem,\n  convertMetadataField,\n} from '../utils/metadata';\n\n// Action Types\nexport const UPDATE_TITLE = 'UPDATE_TITLE';\nexport const UPDATE_BODY = 'UPDATE_BODY';\nexport const UPDATE_PATH = 'UPDATE_PATH';\nexport const STORE_CONTENT_FIELDS = 'STORE_CONTENT_FIELDS';\nexport const ADD_METAFIELD = 'ADD_METAFIELD';\nexport const REMOVE_METAFIELD = 'REMOVE_METAFIELD';\nexport const UPDATE_FIELD_KEY = 'UPDATE_FIELD_KEY';\nexport const UPDATE_FIELD_VALUE = 'UPDATE_FIELD_VALUE';\nexport const MOVE_ARRAY_ITEM = 'MOVE_ARRAY_ITEM';\nexport const CONVERT_FIELD = 'CONVERT_FIELD';\n\n// Actions\nexport const storeContentFields = content => ({\n  type: STORE_CONTENT_FIELDS,\n  content,\n});\n\nexport const addField = namePrefix => ({\n  type: ADD_METAFIELD,\n  namePrefix,\n});\n\nexport const removeField = (namePrefix, key) => ({\n  type: REMOVE_METAFIELD,\n  namePrefix,\n  key,\n});\n\nexport const updateFieldKey = (namePrefix, fieldKey, newKey) => ({\n  type: UPDATE_FIELD_KEY,\n  namePrefix,\n  fieldKey,\n  newKey,\n});\n\nexport const updateFieldValue = (nameAttr, value) => ({\n  type: UPDATE_FIELD_VALUE,\n  nameAttr,\n  value,\n});\n\nexport const moveArrayItem = (namePrefix, srcInd, targetInd) => ({\n  type: MOVE_ARRAY_ITEM,\n  namePrefix,\n  srcInd,\n  targetInd,\n});\n\nexport const convertField = (nameAttr, convertType) => ({\n  type: CONVERT_FIELD,\n  nameAttr,\n  convertType,\n});\n\nexport const updateTitle = title => ({\n  type: UPDATE_TITLE,\n  title,\n});\n\nexport const updateBody = body => ({\n  type: UPDATE_BODY,\n  body,\n});\n\nexport const updatePath = path => ({\n  type: UPDATE_PATH,\n  path,\n});\n\n// Reducer\nexport default function metadata( // TODO normalize the metadata\n  state = {\n    metadata: {},\n    new_field_count: 1,\n    key_prefix: '', // force children to be rerendered on sort\n    fieldChanged: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case UPDATE_TITLE:\n      return {\n        ...state,\n        metadata: {\n          ...state.metadata,\n          title: action.title,\n        },\n        fieldChanged: true,\n      };\n    case UPDATE_BODY:\n      return {\n        ...state,\n        metadata: {\n          ...state.metadata,\n          raw_content: action.body,\n        },\n        fieldChanged: true,\n      };\n    case UPDATE_PATH:\n      return {\n        ...state,\n        metadata: {\n          ...state.metadata,\n          path: action.path,\n        },\n        fieldChanged: true,\n      };\n    case STORE_CONTENT_FIELDS:\n      return {\n        ...state,\n        metadata: action.content,\n      };\n    case ADD_METAFIELD:\n      return {\n        ...state,\n        metadata: addFieldToMetadata(state, action.namePrefix),\n        new_field_count: state.new_field_count + 1,\n      };\n    case REMOVE_METAFIELD:\n      return {\n        ...state,\n        metadata: removeFieldFromMetadata(state, action.namePrefix, action.key),\n        fieldChanged: true,\n        key_prefix: `${Math.random() * 100}`,\n      };\n    case UPDATE_FIELD_KEY:\n      return {\n        ...state,\n        metadata: updateMetadataFieldKey(\n          state,\n          action.namePrefix,\n          action.fieldKey,\n          action.newKey.trim()\n        ),\n        fieldChanged: true,\n      };\n    case UPDATE_FIELD_VALUE:\n      return {\n        ...state,\n        metadata: updateMetadataFieldValue(\n          state,\n          action.nameAttr,\n          action.value\n        ),\n        fieldChanged: true,\n      };\n    case MOVE_ARRAY_ITEM:\n      return {\n        ...state,\n        metadata: moveMetadataArrayItem(\n          state,\n          action.namePrefix,\n          action.srcInd,\n          action.targetInd\n        ),\n        key_prefix: `${Math.random() * 100}`,\n        fieldChanged: true,\n      };\n    case CONVERT_FIELD:\n      return {\n        ...state,\n        metadata: convertMetadataField(\n          state,\n          action.nameAttr,\n          action.convertType\n        ),\n        new_field_count: state.new_field_count + 1,\n        fieldChanged: true,\n      };\n    default:\n      return {\n        ...state,\n        fieldChanged: false,\n      };\n  }\n}\n","import { getSiteMetaUrl } from '../constants/api';\nimport { get } from '../utils/fetch';\n\n// Action Types\nexport const FETCH_SITE_META_REQUEST = 'FETCH_SITE_META_REQUEST';\nexport const FETCH_SITE_META_SUCCESS = 'FETCH_SITE_META_SUCCESS';\nexport const FETCH_SITE_META_FAILURE = 'FETCH_SITE_META_FAILURE';\n\n// Actions\nexport const fetchSiteMeta = () => dispatch => {\n  dispatch({ type: FETCH_SITE_META_REQUEST });\n  return get(\n    getSiteMetaUrl(),\n    { type: FETCH_SITE_META_SUCCESS, name: 'site' },\n    { type: FETCH_SITE_META_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\n// Reducer\nexport default function siteMeta(\n  state = {\n    site: {},\n    isFetching: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_SITE_META_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_SITE_META_SUCCESS:\n      return {\n        ...state,\n        site: action.site,\n        isFetching: false,\n      };\n    case FETCH_SITE_META_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n      };\n    default:\n      return state;\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport _ from 'underscore';\nimport MetaField from '../components/metadata/MetaField';\nimport Icon from '../components/Icon';\nimport {\n  storeContentFields,\n  addField,\n  removeField,\n  updateFieldKey,\n  updateFieldValue,\n  moveArrayItem,\n  convertField,\n} from '../ducks/metadata';\nimport { fetchSiteMeta } from '../ducks/siteMeta';\nimport { computeFieldType } from '../utils/metadata';\n\nexport class MetaFields extends Component {\n  componentDidMount() {\n    const { storeContentFields, fields, fetchSiteMeta, dataview } = this.props;\n    if (!dataview) fetchSiteMeta();\n    storeContentFields(fields);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return !_.isEqual(nextProps.metadata, this.props.metadata);\n  }\n\n  render() {\n    const {\n      metadata,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n      dataview,\n      site,\n    } = this.props;\n\n    let visibleKeys = metadata;\n\n    if (!dataview) {\n      visibleKeys = _.omit(visibleKeys, ['title', 'path', 'raw_content']);\n    }\n\n    const metafieldsClass = classnames({\n      datafields: dataview,\n      metafields: !dataview,\n    });\n\n    const metafields = _.map(visibleKeys, (field, key) => {\n      const type = computeFieldType(field, key);\n      return (\n        <MetaField\n          key={key}\n          key_prefix={key_prefix}\n          type={type}\n          parentType=\"top\"\n          fieldKey={key}\n          fieldValue={field}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`metadata['${key}']`}\n          namePrefix={`metadata`}\n          siteMeta={dataview ? null : site}\n        />\n      );\n    });\n\n    const newWrapper = dataview ? (\n      <div className=\"data-new\">\n        <a onClick={() => addField('metadata')}>\n          <Icon name=\"plus-circle\" /> New data field\n        </a>\n      </div>\n    ) : (\n      <div className=\"meta-new\">\n        <a onClick={() => addField('metadata')} className=\"tooltip\">\n          <Icon name=\"plus-circle\" /> New metadata field\n          <span className=\"tooltip-text\">\n            Metadata will be stored as the <b>YAML front matter</b> within the\n            document.\n          </span>\n        </a>\n        <small className=\"tooltip pull-right\">\n          <Icon name=\"info-circle\" />\n          Special Keys\n          <span className=\"tooltip-text\">\n            You can use special keys like <b>date</b>, <b>file</b>, <b>image</b>\n            , <b>layout</b> or <b>tags</b> for user-friendly functionalities.\n          </span>\n        </small>\n      </div>\n    );\n\n    return (\n      <div className={metafieldsClass}>\n        {metafields}\n        {newWrapper}\n      </div>\n    );\n  }\n}\n\nMetaFields.propTypes = {\n  fields: PropTypes.object.isRequired,\n  metadata: PropTypes.object.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n  storeContentFields: PropTypes.func.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  fetchSiteMeta: PropTypes.func.isRequired,\n  dataview: PropTypes.bool,\n  site: PropTypes.object,\n};\n\nconst mapStateToProps = state => ({\n  metadata: state.metadata.metadata,\n  key_prefix: state.metadata.key_prefix,\n  site: state.meta.site,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      storeContentFields,\n      fetchSiteMeta,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MetaFields);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MetaFields from '../containers/MetaFields';\n\nclass DataGUI extends Component {\n  handleChange = e => this.props.onChange(e.target.value);\n\n  renderPathFields(slug, ext) {\n    return (\n      <form className=\"datafile-path\">\n        <fieldset className=\"filename\">\n          <legend>Path (without extension)</legend>\n          <input\n            type=\"text\"\n            id=\"path\"\n            defaultValue={slug}\n            placeholder=\"filename\"\n            onChange={this.handleChange}\n            ref=\"filepath\"\n          />\n        </fieldset>\n        <fieldset className=\"file-type\">\n          <legend>File Type</legend>\n          <select\n            id=\"extn\"\n            defaultValue={ext}\n            onChange={this.handleChange}\n            ref=\"extname\"\n          >\n            <option value=\".yml\">YAML</option>\n            <option value=\".json\">JSON</option>\n          </select>\n        </fieldset>\n      </form>\n    );\n  }\n\n  render() {\n    const { fields, slug, ext, restricted } = this.props;\n    return (\n      <div>\n        <div className=\"warning\">\n          CAUTION! Any existing comments will be lost when editing via this\n          view. Switch to the <strong>Raw Editor</strong> to preserve them.\n        </div>\n        {!restricted && this.renderPathFields(slug, ext)}\n        <MetaFields fields={fields} dataview />\n      </div>\n    );\n  }\n}\n\nDataGUI.defaultProps = {\n  fields: {},\n  slug: '',\n  ext: '',\n  restricted: false,\n};\n\nDataGUI.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  fields: PropTypes.object,\n  slug: PropTypes.string,\n  ext: PropTypes.string,\n  restricted: PropTypes.bool,\n};\n\nexport default DataGUI;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AceEditor from 'react-ace';\nimport 'brace/mode/json';\nimport 'brace/mode/yaml';\nimport 'brace/theme/monokai';\n\nclass Editor extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextProps.content !== this.props.content;\n  }\n\n  handleChange = () => {\n    const { onEditorChange, editorChanged } = this.props;\n    !editorChanged && onEditorChange();\n  };\n\n  getValue() {\n    return this.refs.ace.editor.getValue();\n  }\n\n  render() {\n    const { content, type } = this.props;\n    const mode = /json/i.test(type) ? 'json' : 'yaml';\n    return (\n      <div>\n        <AceEditor\n          value={content}\n          mode={mode}\n          theme=\"monokai\"\n          width=\"100%\"\n          height=\"400px\"\n          showGutter={false}\n          showPrintMargin={false}\n          highlightActiveLine={false}\n          className=\"config-editor\"\n          fontSize={14}\n          scrollMargin={[15, 15, 15, 15]}\n          ref=\"ace\"\n          onChange={this.handleChange}\n        />\n        <div className=\"statusbar\">mode: {mode.toUpperCase()}</div>\n      </div>\n    );\n  }\n}\n\nEditor.propTypes = {\n  content: PropTypes.any.isRequired,\n  onEditorChange: PropTypes.func.isRequired,\n  editorChanged: PropTypes.bool.isRequired,\n  type: PropTypes.string,\n};\n\nexport default Editor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\n\nconst Errors = ({ errors }) => (\n  <div className=\"error-messages\">\n    {_.map(errors, (error, i) => <div key={i}>{error}</div>)}\n  </div>\n);\n\nErrors.propTypes = {\n  errors: PropTypes.array.isRequired,\n};\n\nexport default Errors;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Icon from './Icon';\n\nimport translations from '../translations';\nconst { labels } = translations;\n\nconst iconMap = {\n  create: 'plus-square',\n  delete: 'trash',\n  publish: 'send-o',\n  save: 'save',\n  upload: 'upload',\n  view: 'eye',\n};\n\nexport default function Button({\n  type,\n  active,\n  triggered,\n  onClick,\n  block,\n  thin,\n  icon,\n  to,\n}) {\n  const btnClass = classnames('btn', {\n    'btn-active': active,\n    'btn-success': active && (type === 'save' || type === 'create'),\n    'btn-delete': type === 'delete',\n    'btn-view': type === 'view' || type === 'publish',\n    'btn-inactive': !active,\n    'btn-fat': block,\n    'btn-thin': thin,\n  });\n\n  let label, triggeredLabel;\n  switch (type) {\n    case 'save':\n    case 'create':\n      label = labels[type].label;\n      triggeredLabel = labels[type].triggeredLabel;\n      break;\n    case 'view-toggle':\n      label = labels.viewToggle.label;\n      triggeredLabel = labels.viewToggle.triggeredLabel;\n      break;\n    case 'view':\n    case 'delete':\n    case 'upload':\n    case 'publish':\n      label = labels[type].label;\n      break;\n    default:\n      label = '<LABEL>';\n      triggeredLabel = '<NEXT LABEL>';\n  }\n\n  const iconName = icon || iconMap[type];\n  const iconNode = iconName && <Icon name={iconName} />;\n\n  if (to) {\n    return (\n      <a href={to} target=\"_blank\" rel=\"noopener noreferrer\" className={btnClass}>\n        {iconNode}\n        {label}\n      </a>\n    );\n  } else if (onClick) {\n    return (\n      <button onClick={onClick} className={btnClass}>\n        {iconNode}\n        {triggered ? triggeredLabel : label}\n      </button>\n    );\n  }\n\n  return null;\n}\n\nButton.propTypes = {\n  type: PropTypes.string.isRequired,\n  active: PropTypes.bool.isRequired,\n  onClick: PropTypes.func,\n  triggered: PropTypes.bool,\n  block: PropTypes.bool,\n  thin: PropTypes.bool,\n  icon: PropTypes.string,\n  to: PropTypes.string,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\nimport DataGUI from '../../components/DataGUI';\nimport Editor from '../../components/Editor';\nimport Errors from '../../components/Errors';\nimport Button from '../../components/Button';\nimport { putConfig, onEditorChange } from '../../ducks/config';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault } from '../../utils/helpers';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class Configuration extends Component {\n  state = {\n    guiView: false,\n  };\n\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    const { editorChanged, fieldChanged } = this.props;\n    if (editorChanged || fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  toggleView = () => {\n    this.setState(state => {\n      return { guiView: !state.guiView };\n    });\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { editorChanged, fieldChanged, putConfig } = this.props;\n    if (editorChanged) {\n      const value = this.refs.editor.getValue();\n      putConfig(value);\n    } else if (fieldChanged) {\n      putConfig(null, 'gui');\n    }\n  };\n\n  renderContentBody() {\n    const { config, editorChanged, onEditorChange } = this.props;\n    const { raw_content, content } = config;\n\n    if (this.state.guiView && content) {\n      return <DataGUI fields={content} onChange={onEditorChange} restricted />;\n    }\n\n    return (\n      <Editor\n        editorChanged={editorChanged}\n        onEditorChange={onEditorChange}\n        content={raw_content}\n        ref=\"editor\"\n      />\n    );\n  }\n\n  render() {\n    const { editorChanged, fieldChanged, updated, errors } = this.props;\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    return (\n      <DocumentTitle title=\"Configuration\">\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors && errors.length > 0 && <Errors errors={errors} />}\n          <div className=\"content-header\">\n            <h1>Configuration</h1>\n            <div className=\"page-buttons multiple\">\n              <Button\n                onClick={this.toggleView}\n                type=\"view-toggle\"\n                triggered={this.state.guiView}\n                active\n                block\n              />\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={editorChanged || fieldChanged}\n                triggered={updated}\n                block\n              />\n            </div>\n          </div>\n          <div className=\"content-body\">{this.renderContentBody()}</div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nConfiguration.propTypes = {\n  config: PropTypes.object.isRequired,\n  onEditorChange: PropTypes.func.isRequired,\n  putConfig: PropTypes.func.isRequired,\n  updated: PropTypes.bool.isRequired,\n  editorChanged: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  config: state.config.config,\n  updated: state.config.updated,\n  editorChanged: state.config.editorChanged,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ putConfig, onEditorChange, clearErrors }, dispatch);\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(Configuration)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { browserHistory, Link } from 'react-router';\nimport Breadcrumbs from './Breadcrumbs';\nimport Button from './Button';\nimport Icon from './Icon';\nimport InputSearch from './form/InputSearch';\nimport { ADMIN_PREFIX } from '../constants';\n\nimport translations from '../translations';\nconst { getDeleteMessage, getNotFoundMessage } = translations;\n\nexport default class Explorer extends Component {\n  handleClickDelete(filename) {\n    const { deleteItem, params, type } = this.props;\n    const confirm = window.confirm(getDeleteMessage(filename));\n    const dir = params.splat ? `/${params.splat}` : '';\n    if (confirm) {\n      deleteItem(params.splat, filename);\n      browserHistory.push(`${ADMIN_PREFIX}/${type}${dir}`);\n    }\n  }\n\n  renderTitleCell(name, icon, type, path) {\n    return (\n      <td className=\"row-title\">\n        <strong>\n          <Link to={`${ADMIN_PREFIX}/${type}/${path}`}>\n            <Icon name={icon} />\n            {name}\n          </Link>\n        </strong>\n      </td>\n    );\n  }\n\n  renderDirectoryRow(directory, type, index) {\n    const { name, relative_path } = directory;\n    return (\n      <tr key={index}>\n        {this.renderTitleCell(name, 'folder', type, relative_path)}\n        <td />\n      </tr>\n    );\n  }\n\n  renderFileRow(file, type, index) {\n    const { name, relative_path, http_url } = file;\n    return (\n      <tr key={index}>\n        {this.renderTitleCell(name, 'file-text-o', type, relative_path)}\n        <td>\n          <div className=\"row-actions\">\n            <Button\n              onClick={() => this.handleClickDelete(name)}\n              type=\"delete\"\n              active\n              thin\n            />\n            {http_url && <Button to={http_url} type=\"view\" active thin />}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  renderRows() {\n    const { items, type } = this.props;\n    return items.map((entry, index) =>\n      entry.type === 'directory'\n        ? this.renderDirectoryRow(entry, type, index)\n        : this.renderFileRow(entry, type, index)\n    );\n  }\n\n  render() {\n    const { items, type, newBtnLabel, search, params } = this.props;\n    const typeLabel = type === 'datafiles' ? 'data files' : type;\n\n    const to = params.splat\n      ? `${ADMIN_PREFIX}/${type}/${params.splat}/new`\n      : `${ADMIN_PREFIX}/${type}/new`;\n\n    const content = items.length ? (\n      <div className=\"content-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Filename</th>\n              <th className=\"th-actions\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderRows()}</tbody>\n        </table>\n      </div>\n    ) : (\n      <h1>{getNotFoundMessage(typeLabel)}</h1>\n    );\n\n    return (\n      <div>\n        <div className=\"content-header\">\n          <Breadcrumbs type={type} splat={params.splat} />\n          <div className=\"page-buttons\">\n            <Link className=\"btn btn-active\" to={to}>\n              {newBtnLabel}\n            </Link>\n          </div>\n          <div className=\"pull-right\">\n            <InputSearch searchBy=\"filename\" search={search} />\n          </div>\n        </div>\n        {content}\n      </div>\n    );\n  }\n}\n\nExplorer.propTypes = {\n  type: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  params: PropTypes.object.isRequired,\n  newBtnLabel: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  search: PropTypes.func.isRequired,\n};\n","import _ from 'underscore';\nimport { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { get, put, del } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { slugify, trimObject, computeRelativePath } from '../utils/helpers';\nimport { pagesAPIUrl, pageAPIUrl } from '../constants/api';\n\nimport translations from '../translations';\nconst { getTitleRequiredMessage, getFilenameNotValidMessage } = translations;\n\n// Action Types\nexport const FETCH_PAGES_REQUEST = 'FETCH_PAGES_REQUEST';\nexport const FETCH_PAGES_SUCCESS = 'FETCH_PAGES_SUCCESS';\nexport const FETCH_PAGES_FAILURE = 'FETCH_PAGES_FAILURE';\nexport const FETCH_PAGE_REQUEST = 'FETCH_PAGE_REQUEST';\nexport const FETCH_PAGE_SUCCESS = 'FETCH_PAGE_SUCCESS';\nexport const FETCH_PAGE_FAILURE = 'FETCH_PAGE_FAILURE';\nexport const PUT_PAGE_REQUEST = 'PUT_PAGE_REQUEST';\nexport const PUT_PAGE_SUCCESS = 'PUT_PAGE_SUCCESS';\nexport const PUT_PAGE_FAILURE = 'PUT_PAGE_FAILURE';\nexport const DELETE_PAGE_REQUEST = 'DELETE_PAGE_REQUEST';\nexport const DELETE_PAGE_SUCCESS = 'DELETE_PAGE_SUCCESS';\nexport const DELETE_PAGE_FAILURE = 'DELETE_PAGE_FAILURE';\n\n// Actions\nexport const fetchPages = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_PAGES_REQUEST });\n  return get(\n    pagesAPIUrl(directory),\n    { type: FETCH_PAGES_SUCCESS, name: 'pages' },\n    { type: FETCH_PAGES_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchPage = (directory, filename) => dispatch => {\n  dispatch({ type: FETCH_PAGE_REQUEST });\n  return get(\n    pageAPIUrl(directory, filename),\n    { type: FETCH_PAGE_SUCCESS, name: 'page' },\n    { type: FETCH_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const createPage = directory => (dispatch, getState) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if (!path && title) {\n    path = `${slugify(title)}.md`;\n  } else {\n    const errors = validatePage(metadata);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  //send the put request\n  return put(\n    pageAPIUrl(directory, path),\n    preparePayload({ front_matter, raw_content }),\n    { type: PUT_PAGE_SUCCESS, name: 'page' },\n    { type: PUT_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putPage = (directory, filename) => (dispatch, getState) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if (!path && title) {\n    path = `${slugify(title)}.md`;\n  } else {\n    const errors = validatePage(metadata);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  const relative_path = directory ? `${directory}/${path}` : `${path}`;\n  //send the put request\n  return put(\n    // create or update page according to filename existence\n    pageAPIUrl(directory, filename),\n    preparePayload({ path: relative_path, front_matter, raw_content }),\n    { type: PUT_PAGE_SUCCESS, name: 'page' },\n    { type: PUT_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deletePage = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    pageAPIUrl(directory, filename),\n    { type: DELETE_PAGE_SUCCESS, name: 'page', id: relative_path },\n    { type: DELETE_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst validatePage = metadata =>\n  validator(\n    metadata,\n    { path: 'required|filename' },\n    {\n      'path.required': getTitleRequiredMessage(),\n      'path.filename': getFilenameNotValidMessage(),\n    }\n  );\n\nconst preparePayload = obj => JSON.stringify(trimObject(obj));\n\n// Reducer\nexport default function pages(\n  state = {\n    pages: [],\n    page: {},\n    isFetching: false,\n    updated: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_PAGES_REQUEST:\n    case FETCH_PAGE_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_PAGES_SUCCESS:\n      return {\n        ...state,\n        pages: action.pages,\n        isFetching: false,\n        page: {},\n      };\n    case FETCH_PAGES_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n        pages: [],\n      };\n    case FETCH_PAGE_SUCCESS:\n      return {\n        ...state,\n        page: action.page,\n        isFetching: false,\n      };\n    case FETCH_PAGE_FAILURE:\n      return {\n        ...state,\n        page: {},\n        isFetching: false,\n      };\n    case PUT_PAGE_SUCCESS:\n      return {\n        ...state,\n        page: action.page,\n        updated: true,\n      };\n    case DELETE_PAGE_SUCCESS:\n      return {\n        ...state,\n        pages: filterDeleted(state.pages, action.id),\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n      };\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Explorer from '../../components/Explorer';\nimport { search, filterBySearchInput } from '../../ducks/utils';\nimport { fetchPages, deletePage } from '../../ducks/pages';\nimport { getDocumentTitle } from '../../utils/helpers';\n\nexport class Pages extends Component {\n  componentDidMount() {\n    const { fetchPages, params } = this.props;\n    fetchPages(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchPages } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchPages(nextProps.params.splat);\n    }\n  }\n\n  render() {\n    const { isFetching, pages, search, params, deletePage } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const title = getDocumentTitle('pages', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <Explorer\n          type=\"pages\"\n          items={pages}\n          params={params}\n          newBtnLabel=\"New page\"\n          search={search}\n          deleteItem={deletePage}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nPages.propTypes = {\n  pages: PropTypes.array.isRequired,\n  fetchPages: PropTypes.func.isRequired,\n  deletePage: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  pages: filterBySearchInput(state.pages.pages, state.utils.input),\n  isFetching: state.pages.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchPages,\n      deletePage,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pages);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport moment from 'moment';\nimport Icon from '../Icon';\n\nexport default class InputFilename extends Component {\n  handleChange = e => {\n    const { onChange } = this.props;\n\n    // The `TextareaAutosize` has a `value` attribute\n    // which is supposed to be set to its inner `TextArea`'s value\n    // but is always undefined\n    // So this is a workaround\n    this.refs.input.value = e.target.value;\n\n    onChange(e.target.value);\n  };\n\n  render() {\n    const { path, type } = this.props;\n\n    let placeholder = 'example.md';\n    if (type === 'posts') {\n      const date = moment().format('YYYY-MM-DD');\n      placeholder = `${date}-your-title.md`;\n    } else if (type === 'data files') {\n      placeholder = 'your-filename.yml';\n    }\n\n    let tooltip = null;\n    if (type !== 'data files') {\n      tooltip = (\n        <span className=\"tooltip\">\n          <Icon name=\"info-circle\" />\n          <span className=\"tooltip-text\">\n            If you leave <b>path</b> blank, it will be autogenerated from title.\n          </span>\n        </span>\n      );\n    }\n    return (\n      <div className=\"input-path\">\n        <label>Path {tooltip}</label>\n        <TextareaAutosize\n          key={path}\n          onChange={this.handleChange}\n          placeholder={placeholder}\n          defaultValue={path}\n          ref=\"input\"\n        />\n      </div>\n    );\n  }\n}\n\nInputFilename.propTypes = {\n  path: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\n\nexport default class InputTitle extends Component {\n  shouldComponentUpdate(nextProps) {\n    return nextProps.title !== this.props.title;\n  }\n\n  handleChange = e => {\n    const { onChange } = this.props;\n    onChange(e.target.value);\n  };\n\n  render() {\n    const { title } = this.props;\n    return (\n      <div className=\"input-title\">\n        <label>Title</label>\n        <TextareaAutosize\n          onChange={this.handleChange}\n          placeholder=\"Title\"\n          defaultValue={title}\n          ref=\"input\"\n        />\n      </div>\n    );\n  }\n}\n\nInputTitle.propTypes = {\n  title: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","/* eslint-disable */\n\nimport hljs from 'highlight.js/lib/highlight';\n\n// ---\n// Languages supported as of highlight.js v9.17.1.\n//\n// We can't have a dynamic require statement below because webpack doesn't\n// evaluate statements and will therefore include all languages in the final\n// bundle unless webpack is additionally configured to not include the languages\n// we don't intend to include.\n// ---\n\nhljs.registerLanguage('actionscript',      require('highlight.js/lib/languages/actionscript'));\nhljs.registerLanguage('apache',            require('highlight.js/lib/languages/apache'));\nhljs.registerLanguage('applescript',       require('highlight.js/lib/languages/applescript'));\nhljs.registerLanguage('asciidoc',          require('highlight.js/lib/languages/asciidoc'));\nhljs.registerLanguage('bash',              require('highlight.js/lib/languages/bash'));\nhljs.registerLanguage('basic',             require('highlight.js/lib/languages/basic'));\nhljs.registerLanguage('clojure',           require('highlight.js/lib/languages/clojure'));\nhljs.registerLanguage('clojure-repl',      require('highlight.js/lib/languages/clojure-repl'));\nhljs.registerLanguage('cmake',             require('highlight.js/lib/languages/cmake'));\nhljs.registerLanguage('coffeescript',      require('highlight.js/lib/languages/coffeescript'));\nhljs.registerLanguage('cpp',               require('highlight.js/lib/languages/cpp'));\nhljs.registerLanguage('crystal',           require('highlight.js/lib/languages/crystal'));\nhljs.registerLanguage('css',               require('highlight.js/lib/languages/css'));\nhljs.registerLanguage('dart',              require('highlight.js/lib/languages/dart'));\nhljs.registerLanguage('diff',              require('highlight.js/lib/languages/diff'));\nhljs.registerLanguage('django',            require('highlight.js/lib/languages/django'));\nhljs.registerLanguage('dns',               require('highlight.js/lib/languages/dns'));\nhljs.registerLanguage('dockerfile',        require('highlight.js/lib/languages/dockerfile'));\nhljs.registerLanguage('dos',               require('highlight.js/lib/languages/dos'));\nhljs.registerLanguage('dsconfig',          require('highlight.js/lib/languages/dsconfig'));\nhljs.registerLanguage('elixir',            require('highlight.js/lib/languages/elixir'));\nhljs.registerLanguage('elm',               require('highlight.js/lib/languages/elm'));\nhljs.registerLanguage('erb',               require('highlight.js/lib/languages/erb'));\nhljs.registerLanguage('erlang-repl',       require('highlight.js/lib/languages/erlang-repl'));\nhljs.registerLanguage('erlang',            require('highlight.js/lib/languages/erlang'));\nhljs.registerLanguage('excel',             require('highlight.js/lib/languages/excel'));\nhljs.registerLanguage('fortran',           require('highlight.js/lib/languages/fortran'));\nhljs.registerLanguage('fsharp',            require('highlight.js/lib/languages/fsharp'));\nhljs.registerLanguage('gherkin',           require('highlight.js/lib/languages/gherkin'));\nhljs.registerLanguage('go',                require('highlight.js/lib/languages/go'));\nhljs.registerLanguage('gradle',            require('highlight.js/lib/languages/gradle'));\nhljs.registerLanguage('groovy',            require('highlight.js/lib/languages/groovy'));\nhljs.registerLanguage('haml',              require('highlight.js/lib/languages/haml'));\nhljs.registerLanguage('handlebars',        require('highlight.js/lib/languages/handlebars'));\nhljs.registerLanguage('haskell',           require('highlight.js/lib/languages/haskell'));\nhljs.registerLanguage('htmlbars',          require('highlight.js/lib/languages/htmlbars'));\nhljs.registerLanguage('http',              require('highlight.js/lib/languages/http'));\nhljs.registerLanguage('ini',               require('highlight.js/lib/languages/ini'));\nhljs.registerLanguage('java',              require('highlight.js/lib/languages/java'));\nhljs.registerLanguage('javascript',        require('highlight.js/lib/languages/javascript'));\nhljs.registerLanguage('json',              require('highlight.js/lib/languages/json'));\nhljs.registerLanguage('julia',             require('highlight.js/lib/languages/julia'));\nhljs.registerLanguage('julia-repl',        require('highlight.js/lib/languages/julia-repl'));\nhljs.registerLanguage('kotlin',            require('highlight.js/lib/languages/kotlin'));\nhljs.registerLanguage('ldif',              require('highlight.js/lib/languages/ldif'));\nhljs.registerLanguage('less',              require('highlight.js/lib/languages/less'));\nhljs.registerLanguage('lisp',              require('highlight.js/lib/languages/lisp'));\nhljs.registerLanguage('livescript',        require('highlight.js/lib/languages/livescript'));\nhljs.registerLanguage('lua',               require('highlight.js/lib/languages/lua'));\nhljs.registerLanguage('makefile',          require('highlight.js/lib/languages/makefile'));\nhljs.registerLanguage('markdown',          require('highlight.js/lib/languages/markdown'));\nhljs.registerLanguage('mathematica',       require('highlight.js/lib/languages/mathematica'));\nhljs.registerLanguage('matlab',            require('highlight.js/lib/languages/matlab'));\nhljs.registerLanguage('perl',              require('highlight.js/lib/languages/perl'));\nhljs.registerLanguage('nginx',             require('highlight.js/lib/languages/nginx'));\nhljs.registerLanguage('nix',               require('highlight.js/lib/languages/nix'));\nhljs.registerLanguage('objectivec',        require('highlight.js/lib/languages/objectivec'));\nhljs.registerLanguage('ocaml',             require('highlight.js/lib/languages/ocaml'));\nhljs.registerLanguage('pgsql',             require('highlight.js/lib/languages/pgsql'));\nhljs.registerLanguage('php',               require('highlight.js/lib/languages/php'));\nhljs.registerLanguage('plaintext',         require('highlight.js/lib/languages/plaintext'));\nhljs.registerLanguage('powershell',        require('highlight.js/lib/languages/powershell'));\nhljs.registerLanguage('prolog',            require('highlight.js/lib/languages/prolog'));\nhljs.registerLanguage('python',            require('highlight.js/lib/languages/python'));\nhljs.registerLanguage('r',                 require('highlight.js/lib/languages/r'));\nhljs.registerLanguage('reasonml',          require('highlight.js/lib/languages/reasonml'));\nhljs.registerLanguage('ruby',              require('highlight.js/lib/languages/ruby'));\nhljs.registerLanguage('rust',              require('highlight.js/lib/languages/rust'));\nhljs.registerLanguage('scala',             require('highlight.js/lib/languages/scala'));\nhljs.registerLanguage('scss',              require('highlight.js/lib/languages/scss'));\nhljs.registerLanguage('shell',             require('highlight.js/lib/languages/shell'));\nhljs.registerLanguage('smalltalk',         require('highlight.js/lib/languages/smalltalk'));\nhljs.registerLanguage('sql',               require('highlight.js/lib/languages/sql'));\nhljs.registerLanguage('swift',             require('highlight.js/lib/languages/swift'));\nhljs.registerLanguage('typescript',        require('highlight.js/lib/languages/typescript'));\nhljs.registerLanguage('vbnet',             require('highlight.js/lib/languages/vbnet'));\nhljs.registerLanguage('vbscript',          require('highlight.js/lib/languages/vbscript'));\nhljs.registerLanguage('vim',               require('highlight.js/lib/languages/vim'));\nhljs.registerLanguage('yaml',              require('highlight.js/lib/languages/yaml'));\nhljs.registerLanguage('xml',               require('highlight.js/lib/languages/xml'));\n\n// ---\n// Uncomment below to include that language in the final build\n// ---\n\n// hljs.registerLanguage('1c',             require('highlight.js/lib/languages/1c'));\n// hljs.registerLanguage('abnf',           require('highlight.js/lib/languages/abnf'));\n// hljs.registerLanguage('accesslog',      require('highlight.js/lib/languages/accesslog'));\n// hljs.registerLanguage('ada',            require('highlight.js/lib/languages/ada'));\n// hljs.registerLanguage('angelscript',    require('highlight.js/lib/languages/angelscript'));\n// hljs.registerLanguage('arcade',         require('highlight.js/lib/languages/arcade'));\n// hljs.registerLanguage('arduino',        require('highlight.js/lib/languages/arduino'));\n// hljs.registerLanguage('armasm',         require('highlight.js/lib/languages/armasm'));\n// hljs.registerLanguage('aspectj',        require('highlight.js/lib/languages/aspectj'));\n// hljs.registerLanguage('autohotkey',     require('highlight.js/lib/languages/autohotkey'));\n// hljs.registerLanguage('autoit',         require('highlight.js/lib/languages/autoit'));\n// hljs.registerLanguage('avrasm',         require('highlight.js/lib/languages/avrasm'));\n// hljs.registerLanguage('awk',            require('highlight.js/lib/languages/awk'));\n// hljs.registerLanguage('axapta',         require('highlight.js/lib/languages/axapta'));\n// hljs.registerLanguage('bnf',            require('highlight.js/lib/languages/bnf'));\n// hljs.registerLanguage('brainfuck',      require('highlight.js/lib/languages/brainfuck'));\n// hljs.registerLanguage('cal',            require('highlight.js/lib/languages/cal'));\n// hljs.registerLanguage('capnproto',      require('highlight.js/lib/languages/capnproto'));\n// hljs.registerLanguage('ceylon',         require('highlight.js/lib/languages/ceylon'));\n// hljs.registerLanguage('clean',          require('highlight.js/lib/languages/clean'));\n// hljs.registerLanguage('coq',            require('highlight.js/lib/languages/coq'));\n// hljs.registerLanguage('cos',            require('highlight.js/lib/languages/cos'));\n// hljs.registerLanguage('crmsh',          require('highlight.js/lib/languages/crmsh'));\n// hljs.registerLanguage('cs',             require('highlight.js/lib/languages/cs'));\n// hljs.registerLanguage('csp',            require('highlight.js/lib/languages/csp'));\n// hljs.registerLanguage('d',              require('highlight.js/lib/languages/d'));\n// hljs.registerLanguage('delphi',         require('highlight.js/lib/languages/delphi'));\n// hljs.registerLanguage('dts',            require('highlight.js/lib/languages/dts'));\n// hljs.registerLanguage('dust',           require('highlight.js/lib/languages/dust'));\n// hljs.registerLanguage('ebnf',           require('highlight.js/lib/languages/ebnf'));\n// hljs.registerLanguage('fix',            require('highlight.js/lib/languages/fix'));\n// hljs.registerLanguage('flix',           require('highlight.js/lib/languages/flix'));\n// hljs.registerLanguage('gams',           require('highlight.js/lib/languages/gams'));\n// hljs.registerLanguage('gauss',          require('highlight.js/lib/languages/gauss'));\n// hljs.registerLanguage('gcode',          require('highlight.js/lib/languages/gcode'));\n// hljs.registerLanguage('glsl',           require('highlight.js/lib/languages/glsl'));\n// hljs.registerLanguage('gml',            require('highlight.js/lib/languages/gml'));\n// hljs.registerLanguage('golo',           require('highlight.js/lib/languages/golo'));\n// hljs.registerLanguage('haxe',           require('highlight.js/lib/languages/haxe'));\n// hljs.registerLanguage('hsp',            require('highlight.js/lib/languages/hsp'));\n// hljs.registerLanguage('hy',             require('highlight.js/lib/languages/hy'));\n// hljs.registerLanguage('inform7',        require('highlight.js/lib/languages/inform7'));\n// hljs.registerLanguage('irpf90',         require('highlight.js/lib/languages/irpf90'));\n// hljs.registerLanguage('isbl',           require('highlight.js/lib/languages/isbl'));\n// hljs.registerLanguage('jboss-cli',      require('highlight.js/lib/languages/jboss-cli'));\n// hljs.registerLanguage('lasso',          require('highlight.js/lib/languages/lasso'));\n// hljs.registerLanguage('leaf',           require('highlight.js/lib/languages/leaf'));\n// hljs.registerLanguage('livecodeserver', require('highlight.js/lib/languages/livecodeserver'));\n// hljs.registerLanguage('llvm',           require('highlight.js/lib/languages/llvm'));\n// hljs.registerLanguage('lsl',            require('highlight.js/lib/languages/lsl'));\n// hljs.registerLanguage('maxima',         require('highlight.js/lib/languages/maxima'));\n// hljs.registerLanguage('mel',            require('highlight.js/lib/languages/mel'));\n// hljs.registerLanguage('mercury',        require('highlight.js/lib/languages/mercury'));\n// hljs.registerLanguage('mipsasm',        require('highlight.js/lib/languages/mipsasm'));\n// hljs.registerLanguage('mizar',          require('highlight.js/lib/languages/mizar'));\n// hljs.registerLanguage('mojolicious',    require('highlight.js/lib/languages/mojolicious'));\n// hljs.registerLanguage('monkey',         require('highlight.js/lib/languages/monkey'));\n// hljs.registerLanguage('moonscript',     require('highlight.js/lib/languages/moonscript'));\n// hljs.registerLanguage('n1ql',           require('highlight.js/lib/languages/n1ql'));\n// hljs.registerLanguage('nimrod',         require('highlight.js/lib/languages/nimrod'));\n// hljs.registerLanguage('nsis',           require('highlight.js/lib/languages/nsis'));\n// hljs.registerLanguage('openscad',       require('highlight.js/lib/languages/openscad'));\n// hljs.registerLanguage('oxygene',        require('highlight.js/lib/languages/oxygene'));\n// hljs.registerLanguage('parser3',        require('highlight.js/lib/languages/parser3'));\n// hljs.registerLanguage('pf',             require('highlight.js/lib/languages/pf'));\n// hljs.registerLanguage('pony',           require('highlight.js/lib/languages/pony'));\n// hljs.registerLanguage('processing',     require('highlight.js/lib/languages/processing'));\n// hljs.registerLanguage('profile',        require('highlight.js/lib/languages/profile'));\n// hljs.registerLanguage('properties',     require('highlight.js/lib/languages/properties'));\n// hljs.registerLanguage('protobuf',       require('highlight.js/lib/languages/protobuf'));\n// hljs.registerLanguage('puppet',         require('highlight.js/lib/languages/puppet'));\n// hljs.registerLanguage('purebasic',      require('highlight.js/lib/languages/purebasic'));\n// hljs.registerLanguage('q',              require('highlight.js/lib/languages/q'));\n// hljs.registerLanguage('qml',            require('highlight.js/lib/languages/qml'));\n// hljs.registerLanguage('rib',            require('highlight.js/lib/languages/rib'));\n// hljs.registerLanguage('roboconf',       require('highlight.js/lib/languages/roboconf'));\n// hljs.registerLanguage('routeros',       require('highlight.js/lib/languages/routeros'));\n// hljs.registerLanguage('rsl',            require('highlight.js/lib/languages/rsl'));\n// hljs.registerLanguage('ruleslanguage',  require('highlight.js/lib/languages/ruleslanguage'));\n// hljs.registerLanguage('sas',            require('highlight.js/lib/languages/sas'));\n// hljs.registerLanguage('scheme',         require('highlight.js/lib/languages/scheme'));\n// hljs.registerLanguage('scilab',         require('highlight.js/lib/languages/scilab'));\n// hljs.registerLanguage('smali',          require('highlight.js/lib/languages/smali'));\n// hljs.registerLanguage('sml',            require('highlight.js/lib/languages/sml'));\n// hljs.registerLanguage('sqf',            require('highlight.js/lib/languages/sqf'));\n// hljs.registerLanguage('stan',           require('highlight.js/lib/languages/stan'));\n// hljs.registerLanguage('stata',          require('highlight.js/lib/languages/stata'));\n// hljs.registerLanguage('step21',         require('highlight.js/lib/languages/step21'));\n// hljs.registerLanguage('stylus',         require('highlight.js/lib/languages/stylus'));\n// hljs.registerLanguage('subunit',        require('highlight.js/lib/languages/subunit'));\n// hljs.registerLanguage('taggerscript',   require('highlight.js/lib/languages/taggerscript'));\n// hljs.registerLanguage('tap',            require('highlight.js/lib/languages/tap'));\n// hljs.registerLanguage('tcl',            require('highlight.js/lib/languages/tcl'));\n// hljs.registerLanguage('tex',            require('highlight.js/lib/languages/tex'));\n// hljs.registerLanguage('thrift',         require('highlight.js/lib/languages/thrift'));\n// hljs.registerLanguage('tp',             require('highlight.js/lib/languages/tp'));\n// hljs.registerLanguage('twig',           require('highlight.js/lib/languages/twig'));\n// hljs.registerLanguage('vala',           require('highlight.js/lib/languages/vala'));\n// hljs.registerLanguage('vbscript-html',  require('highlight.js/lib/languages/vbscript-html'));\n// hljs.registerLanguage('verilog',        require('highlight.js/lib/languages/verilog'));\n// hljs.registerLanguage('vhdl',           require('highlight.js/lib/languages/vhdl'));\n// hljs.registerLanguage('x86asm',         require('highlight.js/lib/languages/x86asm'));\n// hljs.registerLanguage('xl',             require('highlight.js/lib/languages/xl'));\n// hljs.registerLanguage('xquery',         require('highlight.js/lib/languages/xquery'));\n// hljs.registerLanguage('zephir',         require('highlight.js/lib/languages/zephir'));\n\nexport default hljs;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SimpleMDE from 'simplemde';\nimport hljs from '../utils/highlighter';\nimport FilePicker from './FilePicker';\nimport { getExtensionFromPath } from '../utils/helpers';\n\nconst classNames = [\n  'editor-toolbar',\n  'CodeMirror',\n  'editor-preview-side',\n  'editor-statusbar',\n];\n\nclass MarkdownEditor extends Component {\n  componentDidMount() {\n    this.create();\n    window.hljs = hljs; // TODO: fix this after the next release of SimpleMDE\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return nextProps.initialValue !== this.props.initialValue;\n  }\n\n  componentDidUpdate() {\n    this.destroy();\n    this.create();\n  }\n\n  componentWillUnmount() {\n    this.destroy();\n  }\n\n  create() {\n    const { onChange, onSave } = this.props;\n    let opts = Object.create(this.props);\n    opts['element'] = this.refs.text;\n    opts['autoDownloadFontAwesome'] = false;\n    opts['spellChecker'] = false;\n    opts['renderingConfig'] = {\n      codeSyntaxHighlighting: true,\n    };\n    opts['insertTexts'] = {\n      image: ['![', '](#url#)'],\n    };\n    let toolbarIcons = [\n      'bold',\n      'italic',\n      'heading',\n      '|',\n      'code',\n      'quote',\n      'unordered-list',\n      'ordered-list',\n      '|',\n      'link',\n      'image',\n      'table',\n      {\n        name: 'filepicker',\n        action: () => this.refs.filepicker.refs.trigger.click(),\n        className: 'fa fa-paperclip',\n        title: 'Insert Static File',\n      },\n      '|',\n      'preview',\n      'side-by-side',\n      'fullscreen',\n      '|',\n    ];\n    if (onSave) {\n      toolbarIcons.push({\n        name: 'save',\n        action: onSave,\n        className: 'fa fa-floppy-o',\n        title: 'Save',\n      });\n    }\n    opts['toolbar'] = toolbarIcons;\n    const editor = new SimpleMDE(opts);\n    if (editor.codemirror) {\n      editor.codemirror.on('change', () => {\n        onChange(editor.value());\n      });\n    }\n    this.editor = editor;\n  }\n\n  destroy() {\n    for (let i in classNames) {\n      let elementToRemove = this.refs.container.querySelector(\n        '.' + classNames[i]\n      );\n      elementToRemove && elementToRemove.remove();\n    }\n  }\n\n  // Adapted from an internal helper function within SimpleMDE package.\n  _replaceSelectedText = (cm, headNTail, url) => {\n    const startPoint = cm.getCursor('start');\n    const endPoint = cm.getCursor('end');\n    const text = cm.getSelection();\n\n    let [head, tail] = headNTail;\n    if (url) {\n      tail = tail.replace('#url#', url);\n    }\n\n    cm.replaceSelection(`${head}${text}${tail}`);\n    startPoint.ch += head.length;\n\n    if (startPoint !== endPoint) {\n      endPoint.ch += head.length;\n    }\n\n    cm.setSelection(startPoint, endPoint);\n    cm.focus();\n  };\n\n  handleFilePick = path => {\n    const { codemirror, options } = this.editor;\n    const { image, link } = options.insertTexts;\n    const url = `{{ '${path}' | relative_url }}`;\n    const ext = getExtensionFromPath(path);\n\n    const type = /png|jpg|gif|jpeg|svg|ico/i.test(ext) ? image : link;\n    this._replaceSelectedText(codemirror, type, url);\n  };\n\n  render() {\n    return (\n      <div>\n        <div style={{ display: 'none' }}>\n          <FilePicker ref=\"filepicker\" onPick={this.handleFilePick} />\n        </div>\n        <div ref=\"container\">\n          <textarea ref=\"text\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nMarkdownEditor.propTypes = {\n  initialValue: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n\nexport default MarkdownEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\n\nexport default function StaticMetaSimple({ fieldValue }) {\n  return (\n    <div className=\"meta-value\">\n      <TextareaAutosize\n        className=\"field value-field\"\n        value={`${fieldValue}`}\n        disabled\n      />\n    </div>\n  );\n}\n\nStaticMetaSimple.propTypes = {\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArray from './StaticMetaArray';\nimport StaticMetaObject from './StaticMetaObject';\nimport StaticMetaSimple from './StaticMetaSimple';\n\nconst FieldTypes = {\n  array: StaticMetaArray,\n  object: StaticMetaObject,\n  simple: StaticMetaSimple,\n};\n\nexport default function StaticMetaObjectItem({ type, fieldKey, fieldValue }) {\n  const CurrentComponent = FieldTypes[type];\n\n  return (\n    <div className=\"object-item-wrap\">\n      <div className={`object-key ${type}`}>\n        <input\n          value={fieldKey}\n          className=\"field key-field\"\n          type=\"text\"\n          disabled\n        />\n      </div>\n      <div className=\"object-value\">\n        <CurrentComponent fieldValue={fieldValue} />\n      </div>\n    </div>\n  );\n}\n\nStaticMetaObjectItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\nimport StaticMetaObjectItem from './StaticMetaObjectItem';\nimport { computeFieldType } from '../../../utils/metadata';\n\nexport default function StaticMetaObject({ fieldValue }) {\n  const items = _.map(fieldValue, (value, key) => {\n    const type = computeFieldType(value);\n    return (\n      <StaticMetaObjectItem\n        key={key}\n        fieldKey={key}\n        fieldValue={value}\n        type={type}\n      />\n    );\n  });\n\n  return <div className=\"meta-value-object\">{items}</div>;\n}\n\nStaticMetaObject.propTypes = {\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArray from './StaticMetaArray';\nimport StaticMetaObject from './StaticMetaObject';\nimport StaticMetaSimple from './StaticMetaSimple';\n\nconst FieldTypes = {\n  array: StaticMetaArray,\n  object: StaticMetaObject,\n  simple: StaticMetaSimple,\n};\n\nexport default function StaticMetaArrayItem({ type, fieldValue, index }) {\n  const CurrentComponent = FieldTypes[type];\n\n  return (\n    <div className=\"array-item-wrap\">\n      <div className=\"array\">\n        <div className=\"array-header\">\n          <span className=\"array-field-num\">{index + 1}.</span>\n        </div>\n        <CurrentComponent fieldValue={fieldValue} />\n      </div>\n    </div>\n  );\n}\n\nStaticMetaArrayItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArrayItem from './StaticMetaArrayItem';\nimport { computeFieldType } from '../../../utils/metadata';\n\nexport default function StaticMetaArray({ fieldValue }) {\n  const items = fieldValue.map((item, i) => {\n    const type = computeFieldType(item);\n    return (\n      <StaticMetaArrayItem key={i} index={i} fieldValue={item} type={type} />\n    );\n  });\n  return <div className=\"meta-value-array\">{items}</div>;\n}\n\nStaticMetaArray.propTypes = {\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArray from './StaticMetaArray';\nimport StaticMetaObject from './StaticMetaObject';\nimport StaticMetaSimple from './StaticMetaSimple';\n\nconst FieldTypes = {\n  array: StaticMetaArray,\n  object: StaticMetaObject,\n  simple: StaticMetaSimple,\n};\n\nexport default function StaticMetaField({ type, fieldKey, fieldValue }) {\n  const CurrentComponent = FieldTypes[type];\n\n  return (\n    <div className=\"metafield\">\n      <div className={`meta-key ${type}`}>\n        <input\n          value={fieldKey}\n          className=\"field key-field\"\n          type=\"text\"\n          disabled\n        />\n      </div>\n      <CurrentComponent fieldValue={fieldValue} />\n    </div>\n  );\n}\n\nStaticMetaField.propTypes = {\n  type: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\nimport StaticMetaField from './statics/StaticMetaField';\nimport { computeFieldType } from '../../utils/metadata';\n\nexport default function StaticMetaFields({ fields }) {\n  const filteredData = _.omit(fields, ['raw_content']);\n  const metafields = _.map(filteredData, (value, key) => {\n    const type = computeFieldType(value);\n    return (\n      <StaticMetaField\n        key={key}\n        type={type}\n        fieldKey={key}\n        fieldValue={value}\n      />\n    );\n  });\n\n  return (\n    <div id=\"defaults\" className=\"metafields\" title=\"Default Front Matter\">\n      {metafields}\n    </div>\n  );\n}\n\nStaticMetaFields.propTypes = {\n  fields: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Splitter from './Splitter';\nimport InputPath from './form/InputPath';\nimport InputTitle from './form/InputTitle';\nimport MarkdownEditor from './MarkdownEditor';\nimport StaticMetaData from './metadata/StaticMetaFields';\nimport Metadata from '../containers/MetaFields';\n\nexport default function MarkdownPageBody({\n  type,\n  path,\n  body,\n  title,\n  onSave,\n  updateTitle,\n  updatePath,\n  updateBody,\n  metafields,\n  staticmetafields,\n}) {\n  return (\n    <div className=\"content-body\">\n      <InputPath onChange={updatePath} type={type} path={path} />\n      <InputTitle onChange={updateTitle} title={title} />\n      <MarkdownEditor\n        onChange={updateBody}\n        onSave={onSave}\n        placeholder=\"Body\"\n        initialValue={body}\n      />\n      <Splitter />\n      <StaticMetaData fields={staticmetafields} />\n      <Metadata fields={metafields} />\n    </div>\n  );\n}\n\nMarkdownPageBody.defaultProps = {\n  path: '',\n  body: '',\n  title: '',\n  metafields: {},\n  staticmetafields: {},\n};\n\nMarkdownPageBody.propTypes = {\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n  path: PropTypes.string,\n  body: PropTypes.string,\n  title: PropTypes.string,\n  metafields: PropTypes.object,\n  staticmetafields: PropTypes.object,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport _ from 'underscore';\nimport DocumentTitle from 'react-document-title';\nimport Button from '../../components/Button';\nimport Errors from '../../components/Errors';\nimport Splitter from '../../components/Splitter';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport MarkdownPageBody from '../../components/MarkdownPageBody';\nimport { fetchPage, deletePage, putPage } from '../../ducks/pages';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage, getDeleteMessage } = translations;\n\nexport class PageEdit extends Component {\n  componentDidMount() {\n    const { fetchPage, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    fetchPage(directory, filename);\n\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.page.path;\n      const path = this.props.page.path;\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(`${ADMIN_PREFIX}/pages/${new_path}`);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { putPage, fieldChanged, params } = this.props;\n    if (fieldChanged) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      putPage(directory, filename);\n    }\n  };\n\n  handleClickDelete(name) {\n    const { deletePage, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(name));\n    if (confirm) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      deletePage(directory, filename);\n      browserHistory.push(`${ADMIN_PREFIX}/pages/${directory || ''}`);\n    }\n  }\n\n  render() {\n    const {\n      isFetching,\n      page,\n      errors,\n      updateTitle,\n      updateBody,\n      updatePath,\n      updated,\n      fieldChanged,\n      params,\n    } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    if (_.isEmpty(page)) {\n      return <h1>{`Could not find the page.`}</h1>;\n    }\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const {\n      name,\n      raw_content,\n      http_url,\n      front_matter,\n      front_matter_defaults,\n    } = page;\n    const directory = params.splat[0];\n\n    const title = front_matter && front_matter.title ? front_matter.title : '';\n    const document_title = getDocumentTitle('pages', directory, title || name);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"pages\" splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            <MarkdownPageBody\n              type=\"pages\"\n              updateTitle={updateTitle}\n              updatePath={updatePath}\n              updateBody={updateBody}\n              onSave={this.handleClickSave}\n              path={name}\n              title={title}\n              body={raw_content}\n              metafields={{ title, raw_content, path: name, ...front_matter }}\n              staticmetafields={front_matter_defaults}\n            />\n            <div className=\"content-side\">\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={fieldChanged}\n                triggered={updated}\n                block\n              />\n              <Button to={http_url} type=\"view\" active block />\n              <Splitter />\n              <Button\n                onClick={() => this.handleClickDelete(name)}\n                type=\"delete\"\n                active\n                block\n              />\n            </div>\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nPageEdit.propTypes = {\n  page: PropTypes.object.isRequired,\n  fetchPage: PropTypes.func.isRequired,\n  deletePage: PropTypes.func.isRequired,\n  putPage: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  page: state.pages.page,\n  isFetching: state.pages.isFetching,\n  fieldChanged: state.metadata.fieldChanged,\n  updated: state.pages.updated,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchPage,\n      deletePage,\n      putPage,\n      updateTitle,\n      updateBody,\n      updatePath,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PageEdit)\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { HotKeys } from 'react-hotkeys';\nimport Button from './Button';\nimport Errors from './Errors';\nimport Breadcrumbs from './Breadcrumbs';\nimport MarkdownPageBody from './MarkdownPageBody';\nimport { injectDefaultFields as defaultFields } from '../utils/metadata';\n\nexport default function CreateMarkdownPage({\n  type,\n  config,\n  errors,\n  updated,\n  updateBody,\n  updatePath,\n  updateTitle,\n  fieldChanged,\n  onClickSave,\n  params: { splat },\n}) {\n  const metaType = type === 'drafts' ? 'posts' : type;\n\n  return (\n    <HotKeys handlers={{ save: onClickSave }}>\n      {errors.length > 0 && <Errors errors={errors} />}\n\n      <div className=\"content-header\">\n        <Breadcrumbs type={type} splat={splat} />\n      </div>\n\n      <div className=\"content-wrapper\">\n        <MarkdownPageBody\n          type={type}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          updateBody={updateBody}\n          onSave={onClickSave}\n          staticmetafields={defaultFields(config, splat, metaType)}\n        />\n        <div className=\"content-side\">\n          <Button\n            onClick={onClickSave}\n            type=\"create\"\n            active={fieldChanged}\n            triggered={updated}\n            block\n          />\n        </div>\n      </div>\n    </HotKeys>\n  );\n}\n\nCreateMarkdownPage.propTypes = {\n  type: PropTypes.string.isRequired,\n  config: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  errors: PropTypes.array.isRequired,\n  updated: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  onClickSave: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport DocumentTitle from 'react-document-title';\nimport CreateMarkdownPage from '../../components/CreateMarkdownPage';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { createPage } from '../../ducks/pages';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class PageNew extends Component {\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      browserHistory.push(`${ADMIN_PREFIX}/pages/${nextProps.page.path}`);\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { fieldChanged, createPage, params } = this.props;\n    fieldChanged && createPage(params.splat);\n  };\n\n  render() {\n    const {\n      params,\n      config,\n      errors,\n      updated,\n      updateBody,\n      updatePath,\n      updateTitle,\n      fieldChanged,\n    } = this.props;\n\n    const title = getDocumentTitle('pages', params.splat, 'New page');\n\n    return (\n      <DocumentTitle title={title}>\n        <CreateMarkdownPage\n          type=\"pages\"\n          params={params}\n          config={config}\n          errors={errors}\n          updated={updated}\n          updateBody={updateBody}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          fieldChanged={fieldChanged}\n          onClickSave={this.handleClickSave}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nPageNew.propTypes = {\n  createPage: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  config: PropTypes.object.isRequired,\n  page: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  page: state.pages.page,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n  updated: state.pages.updated,\n  config: state.config.config,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      updateTitle,\n      updateBody,\n      updatePath,\n      createPage,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PageNew)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport _ from 'underscore';\nimport moment from 'moment';\nimport DocumentTitle from 'react-document-title';\nimport InputSearch from '../../components/form/InputSearch';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport Button from '../../components/Button';\nimport Icon from '../../components/Icon';\nimport {\n  fetchCollection,\n  deleteDocument,\n  filterBySearchInput,\n} from '../../ducks/collections';\nimport { search } from '../../ducks/utils';\nimport { getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getDeleteMessage, getNotFoundMessage } = translations;\n\nexport class Documents extends Component {\n  componentDidMount() {\n    const { fetchCollection, params } = this.props;\n    fetchCollection(params.collection_name, params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchCollection, params } = nextProps;\n    // refetch the collection when navigating between collections or when splat is changed\n    if (\n      params.splat !== this.props.params.splat ||\n      params.collection_name !== this.props.params.collection_name\n    ) {\n      fetchCollection(params.collection_name, params.splat);\n    }\n  }\n\n  handleClickDelete(filename) {\n    const { deleteDocument, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(filename));\n    confirm && deleteDocument(params.collection_name, params.splat, filename);\n  }\n\n  renderTable() {\n    return (\n      <div className=\"content-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Date</th>\n              <th className=\"th-actions\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderRows()}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  renderFileRow(doc) {\n    const { id, name, title, http_url, collection, relative_path } = doc;\n    const to = `${ADMIN_PREFIX}/collections/${collection}/${relative_path}`;\n    // date w/o timezone\n    let date = doc.date.substring(0, doc.date.lastIndexOf(' '));\n    date =\n      moment(date).format('hh:mm:ss') === '12:00:00'\n        ? moment(date).format('ll')\n        : moment(date).format('lll');\n\n    return (\n      <tr key={id}>\n        <td className=\"row-title\">\n          <strong>\n            <Link to={to}>\n              <Icon name=\"file-text-o\" />\n              {title || name}\n            </Link>\n          </strong>\n        </td>\n        <td>{date}</td>\n        <td>\n          <div className=\"row-actions\">\n            <Button\n              onClick={() => this.handleClickDelete(name)}\n              type=\"delete\"\n              active\n              thin\n            />\n            {http_url && <Button to={http_url} type=\"view\" active thin />}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  renderDirectoryRow(directory) {\n    const { params: { collection_name } } = this.props;\n    const { name, relative_path, modified_time } = directory;\n    const to = `${ADMIN_PREFIX}/collections/${collection_name}/${relative_path}`;\n    // date w/o timezone\n    let date = modified_time.substring(0, modified_time.lastIndexOf(' '));\n    date = moment(date).format('ll');\n    return (\n      <tr key={name}>\n        <td className=\"row-title\">\n          <strong>\n            <Link to={to}>\n              <Icon name=\"folder\" />\n              {name}\n            </Link>\n          </strong>\n        </td>\n        <td>{date}</td>\n        <td />\n      </tr>\n    );\n  }\n\n  renderRows() {\n    const { documents } = this.props;\n    return _.map(documents, entry => {\n      if (entry.type && entry.type === 'directory') {\n        return this.renderDirectoryRow(entry);\n      } else {\n        return this.renderFileRow(entry);\n      }\n    });\n  }\n\n  render() {\n    const { isFetching, documents, search, params } = this.props;\n    const { collection_name } = params;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const splat = params.splat || '';\n    const to = params.splat\n      ? `${ADMIN_PREFIX}/collections/${collection_name}/${splat}/new`\n      : `${ADMIN_PREFIX}/collections/${collection_name}/new`;\n\n    const document_title = getDocumentTitle(collection_name, params.splat);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <div>\n          <div className=\"content-header\">\n            <Breadcrumbs type={collection_name} splat={splat} />\n            <div className=\"page-buttons\">\n              <Link className=\"btn btn-active\" to={to}>\n                {collection_name === 'posts' ? 'New post' : 'New document'}\n              </Link>\n            </div>\n            <div className=\"pull-right\">\n              <InputSearch searchBy=\"title\" search={search} />\n            </div>\n          </div>\n          {documents.length > 0 && this.renderTable()}\n          {!documents.length && <h1>{getNotFoundMessage('documents')}</h1>}\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n\nDocuments.propTypes = {\n  isFetching: PropTypes.bool.isRequired,\n  documents: PropTypes.array.isRequired,\n  fetchCollection: PropTypes.func.isRequired,\n  deleteDocument: PropTypes.func.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  documents: filterBySearchInput(state.collections.entries, state.utils.input),\n  isFetching: state.collections.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchCollection,\n      deleteDocument,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Documents);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport _ from 'underscore';\nimport DocumentTitle from 'react-document-title';\nimport Button from '../../components/Button';\nimport Errors from '../../components/Errors';\nimport Splitter from '../../components/Splitter';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport MarkdownPageBody from '../../components/MarkdownPageBody';\nimport {\n  fetchDocument,\n  deleteDocument,\n  putDocument,\n} from '../../ducks/collections';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage, getDeleteMessage, getNotFoundMessage } = translations;\n\nexport class DocumentEdit extends Component {\n  componentDidMount() {\n    const { fetchDocument, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    fetchDocument(params.collection_name, directory, filename);\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { currentDocument } = this.props;\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.currentDocument.path;\n      const path = currentDocument.path;\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(\n          `${ADMIN_PREFIX}/collections/${new_path.substring(1)}` // remove `_`\n        );\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { putDocument, fieldChanged, params } = this.props;\n    if (fieldChanged) {\n      const collection = params.collection_name;\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      putDocument(collection, directory, filename);\n    }\n  };\n\n  handleClickDelete = () => {\n    const { deleteDocument, params } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    const confirm = window.confirm(getDeleteMessage(filename));\n    if (confirm) {\n      const collection = params.collection_name;\n      deleteDocument(collection, directory, filename);\n      browserHistory.push(\n        `${ADMIN_PREFIX}/collections/${collection}/${directory || ''}`\n      );\n    }\n  };\n\n  render() {\n    const {\n      isFetching,\n      currentDocument,\n      errors,\n      updateTitle,\n      updateBody,\n      updatePath,\n      updated,\n      fieldChanged,\n      params,\n    } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    if (_.isEmpty(currentDocument)) {\n      return <h1>{getNotFoundMessage('document')}</h1>;\n    }\n\n    const {\n      title,\n      raw_content,\n      http_url,\n      collection,\n      front_matter,\n      front_matter_defaults,\n      name,\n    } = currentDocument;\n    const directory = params.splat[0];\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const document_title = getDocumentTitle(collection, directory, title);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type={collection} splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            <MarkdownPageBody\n              type={collection}\n              path={name}\n              title={title}\n              body={raw_content}\n              updatePath={updatePath}\n              updateTitle={updateTitle}\n              updateBody={updateBody}\n              onSave={this.handleClickSave}\n              metafields={{ title, path: name, raw_content, ...front_matter }}\n              staticmetafields={front_matter_defaults}\n            />\n            <div className=\"content-side\">\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={fieldChanged}\n                triggered={updated}\n                block\n              />\n              <Button to={http_url} type=\"view\" active block />\n              <Splitter />\n              <Button\n                onClick={this.handleClickDelete}\n                type=\"delete\"\n                active\n                block\n              />\n            </div>\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDocumentEdit.propTypes = {\n  currentDocument: PropTypes.object.isRequired,\n  fetchDocument: PropTypes.func.isRequired,\n  deleteDocument: PropTypes.func.isRequired,\n  putDocument: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  updated: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  currentDocument: state.collections.currentDocument,\n  isFetching: state.collections.isFetching,\n  fieldChanged: state.metadata.fieldChanged,\n  updated: state.collections.updated,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDocument,\n      deleteDocument,\n      putDocument,\n      updateTitle,\n      updateBody,\n      updatePath,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DocumentEdit)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport DocumentTitle from 'react-document-title';\nimport CreateMarkdownPage from '../../components/CreateMarkdownPage';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { createDocument } from '../../ducks/collections';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class DocumentNew extends Component {\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const path = nextProps.currentDocument.path;\n      const splat = path.substr(path.indexOf('/') + 1, path.length);\n      browserHistory.push(\n        `${ADMIN_PREFIX}/collections/${nextProps.currentDocument.collection}/${splat}`\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { fieldChanged, createDocument, params } = this.props;\n    fieldChanged && createDocument(params.collection_name, params.splat);\n  };\n\n  render() {\n    const {\n      params,\n      config,\n      errors,\n      updated,\n      updateBody,\n      updatePath,\n      updateTitle,\n      fieldChanged,\n    } = this.props;\n\n    const collection = params.collection_name;\n    const title = getDocumentTitle(collection, params.splat, 'New document');\n\n    return (\n      <DocumentTitle title={title}>\n        <CreateMarkdownPage\n          type={collection}\n          params={params}\n          config={config}\n          errors={errors}\n          updated={updated}\n          updateBody={updateBody}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          fieldChanged={fieldChanged}\n          onClickSave={this.handleClickSave}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDocumentNew.propTypes = {\n  createDocument: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  config: PropTypes.object.isRequired,\n  currentDocument: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  currentDocument: state.collections.currentDocument,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n  updated: state.collections.updated,\n  config: state.config.config,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      updateTitle,\n      updateBody,\n      updatePath,\n      createDocument,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DocumentNew)\n);\n","import { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { get, put, del } from '../utils/fetch';\nimport { datafilesAPIUrl, datafileAPIUrl } from '../constants/api';\nimport {\n  toYAML,\n  trimObject,\n  computeRelativePath,\n  getExtensionFromPath,\n} from '../utils/helpers';\nimport { validator } from '../utils/validation';\n\nimport translations from '../translations';\nconst { getContentRequiredMessage, getFilenameRequiredMessage } = translations;\n\n// Action Types\nexport const FETCH_DATAFILES_REQUEST = 'FETCH_DATAFILES_REQUEST';\nexport const FETCH_DATAFILES_SUCCESS = 'FETCH_DATAFILES_SUCCESS';\nexport const FETCH_DATAFILES_FAILURE = 'FETCH_DATAFILES_FAILURE';\nexport const FETCH_DATAFILE_REQUEST = 'FETCH_DATAFILE_REQUEST';\nexport const FETCH_DATAFILE_SUCCESS = 'FETCH_DATAFILE_SUCCESS';\nexport const FETCH_DATAFILE_FAILURE = 'FETCH_DATAFILE_FAILURE';\nexport const PUT_DATAFILE_REQUEST = 'PUT_DATAFILE_REQUEST';\nexport const PUT_DATAFILE_SUCCESS = 'PUT_DATAFILE_SUCCESS';\nexport const PUT_DATAFILE_FAILURE = 'PUT_DATAFILE_FAILURE';\nexport const DELETE_DATAFILE_REQUEST = 'DELETE_DATAFILE_REQUEST';\nexport const DELETE_DATAFILE_SUCCESS = 'DELETE_DATAFILE_SUCCESS';\nexport const DELETE_DATAFILE_FAILURE = 'DELETE_DATAFILE_FAILURE';\nexport const DATAFILE_CHANGED = 'DATAFILE_CHANGED';\n\n// Actions\nexport const fetchDataFiles = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_DATAFILES_REQUEST });\n  return get(\n    datafilesAPIUrl(directory),\n    { type: FETCH_DATAFILES_SUCCESS, name: 'files' },\n    { type: FETCH_DATAFILES_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchDataFile = (directory, filename) => dispatch => {\n  dispatch({ type: FETCH_DATAFILE_REQUEST });\n  return get(\n    datafileAPIUrl(directory, filename),\n    { type: FETCH_DATAFILE_SUCCESS, name: 'file' },\n    { type: FETCH_DATAFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\n/**\n * Creates and updates a data file.\n * @param {String} directory : Dirname of data file\n * @param {String} filename  : The data file\n * @param {Object} data      : Content to be written to data file\n * @param {String} new_path  : File path relative to config['source']\n * @param {String} source    : Point of origin of file-content data.\n *                             Either the default `#brace-editor`, or `<DataGUI/>`\n */\nexport const putDataFile = (\n  directory,\n  filename,\n  data,\n  new_path = '',\n  source = 'editor'\n) => (dispatch, getState) => {\n  const ext = getExtensionFromPath(new_path || filename);\n\n  if (source === 'gui') {\n    const json = /json/i.test(ext);\n    let metadata = getState().metadata.metadata;\n    metadata = trimObject(metadata);\n    data = json ? JSON.stringify(metadata, null, 2) : toYAML(metadata);\n  }\n\n  const payload = new_path\n    ? { path: new_path, raw_content: data }\n    : { raw_content: data };\n\n  // handle errors\n  const errors = validateDatafile(filename, data);\n  if (errors.length) {\n    return dispatch(validationError(errors));\n  }\n  dispatch({ type: CLEAR_ERRORS });\n\n  return put(\n    datafileAPIUrl(directory, filename),\n    JSON.stringify(payload),\n    { type: PUT_DATAFILE_SUCCESS, name: 'file' },\n    { type: PUT_DATAFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deleteDataFile = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    datafileAPIUrl(directory, filename),\n    { type: DELETE_DATAFILE_SUCCESS, name: 'file', id: relative_path },\n    { type: DELETE_DATAFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const onDataFileChanged = () => ({\n  type: DATAFILE_CHANGED,\n});\n\nconst validateDatafile = (filename, data) =>\n  validator(\n    { filename, data },\n    { filename: 'required', data: 'required' },\n    {\n      'filename.required': getFilenameRequiredMessage(),\n      'data.required': getContentRequiredMessage(),\n    }\n  );\n\n// Reducer\nexport default function datafiles(\n  state = {\n    files: [],\n    currentFile: {},\n    isFetching: false,\n    updated: false,\n    datafileChanged: false,\n    fieldChanged: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_DATAFILES_REQUEST:\n    case FETCH_DATAFILE_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_DATAFILES_SUCCESS:\n      return {\n        ...state,\n        files: action.files,\n        isFetching: false,\n        currentFile: {},\n      };\n    case FETCH_DATAFILES_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n        currentFile: {},\n      };\n    case FETCH_DATAFILE_SUCCESS:\n      return {\n        ...state,\n        currentFile: action.file,\n        isFetching: false,\n      };\n    case FETCH_DATAFILE_FAILURE:\n      return {\n        ...state,\n        currentFile: {},\n        isFetching: false,\n      };\n    case PUT_DATAFILE_SUCCESS:\n      return {\n        ...state,\n        currentFile: action.file,\n        updated: true,\n        datafileChanged: false,\n      };\n    case PUT_DATAFILE_FAILURE:\n      return {\n        ...state,\n        datafileChanged: false,\n      };\n    case DELETE_DATAFILE_SUCCESS:\n      return {\n        ...state,\n        files: filterDeleted(state.files, action.id),\n      };\n    case DATAFILE_CHANGED:\n      return {\n        ...state,\n        datafileChanged: true,\n        updated: false,\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n        datafileChanged: false,\n      };\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Explorer from '../../components/Explorer';\nimport { search, filterBySearchInput } from '../../ducks/utils';\nimport { fetchDataFiles, deleteDataFile } from '../../ducks/datafiles';\nimport { getDocumentTitle } from '../../utils/helpers';\n\nexport class DataFiles extends Component {\n  componentDidMount() {\n    const { fetchDataFiles, params } = this.props;\n    fetchDataFiles(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchDataFiles } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchDataFiles(nextProps.params.splat);\n    }\n  }\n\n  render() {\n    const { isFetching, files, search, params, deleteDataFile } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const title = getDocumentTitle('data files', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <Explorer\n          type=\"datafiles\"\n          items={files}\n          params={params}\n          newBtnLabel=\"New data file\"\n          search={search}\n          deleteItem={deleteDataFile}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDataFiles.propTypes = {\n  files: PropTypes.array.isRequired,\n  fetchDataFiles: PropTypes.func.isRequired,\n  deleteDataFile: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  files: filterBySearchInput(state.datafiles.files, state.utils.input),\n  isFetching: state.datafiles.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDataFiles,\n      deleteDataFile,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataFiles);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport _ from 'underscore';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\nimport DataGUI from '../../components/DataGUI';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputPath from '../../components/form/InputPath';\nimport Splitter from '../../components/Splitter';\nimport Errors from '../../components/Errors';\nimport Editor from '../../components/Editor';\nimport Button from '../../components/Button';\nimport { clearErrors } from '../../ducks/utils';\nimport {\n  getFilenameFromPath,\n  getExtensionFromPath,\n  preventDefault,\n  getDocumentTitle,\n} from '../../utils/helpers';\nimport {\n  fetchDataFile,\n  putDataFile,\n  deleteDataFile,\n  onDataFileChanged,\n} from '../../ducks/datafiles';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage, getDeleteMessage, getNotFoundMessage } = translations;\n\nexport class DataFileEdit extends Component {\n  state = {\n    guiView: false,\n  };\n\n  componentDidMount() {\n    const { fetchDataFile, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n    fetchDataFile(directory, filename);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.datafile.path;\n      const path = this.props.datafile.path;\n\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(\n          `${ADMIN_PREFIX}/datafiles/${nextProps.datafile.relative_path}`\n        );\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    const { datafileChanged, fieldChanged } = this.props;\n    if (datafileChanged || fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  toggleView = () => {\n    this.setState(state => {\n      return { guiView: !state.guiView };\n    });\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const {\n      datafile,\n      datafileChanged,\n      fieldChanged,\n      putDataFile,\n      params,\n    } = this.props;\n    const { path, relative_path } = datafile;\n    const data_dir = path.replace(relative_path, '');\n\n    let name, data, mode;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    if (datafileChanged || fieldChanged) {\n      if (this.state.guiView) {\n        const { filepath, extname } = this.refs.gui.refs;\n        name = filepath.value + extname.value;\n        data = null;\n        mode = 'gui';\n      } else {\n        const { input } = this.refs.inputpath.refs;\n        name = input.value || input.props.defaultValue;\n        data = this.refs.editor.getValue();\n        mode = 'editor';\n      }\n\n      const data_path = directory\n        ? data_dir + `${directory}/` + name\n        : data_dir + name;\n\n      const new_path = data_path !== path ? data_path : '';\n      putDataFile(directory, filename, data, new_path, mode);\n    }\n  };\n\n  handleClickDelete(path) {\n    const { deleteDataFile, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(path));\n\n    if (confirm) {\n      const directory = params.splat[0];\n      const filename = getFilenameFromPath(path);\n      deleteDataFile(directory, filename);\n      const dir = directory ? `/${directory}` : '';\n      browserHistory.push(`${ADMIN_PREFIX}/datafiles${dir}`);\n    }\n  }\n\n  renderAside() {\n    const { datafile, datafileChanged, fieldChanged, updated } = this.props;\n    const { path } = datafile;\n    const filename = getFilenameFromPath(path);\n    const ext = getExtensionFromPath(path);\n    const guiSupport = /ya?ml|json/i.test(ext);\n\n    return (\n      <div className=\"content-side\">\n        <Button\n          onClick={this.handleClickSave}\n          type=\"save\"\n          active={datafileChanged || fieldChanged}\n          triggered={updated}\n          block\n        />\n        {guiSupport && (\n          <Button\n            onClick={this.toggleView}\n            type=\"view-toggle\"\n            triggered={this.state.guiView}\n            active\n            block\n          />\n        )}\n        <Splitter />\n        <Button\n          onClick={() => this.handleClickDelete(filename)}\n          type=\"delete\"\n          active\n          block\n        />\n      </div>\n    );\n  }\n\n  renderContentBody(filename) {\n    const { datafile, datafileChanged, onDataFileChanged } = this.props;\n    const { raw_content, content, slug, ext } = datafile;\n    const { guiView } = this.state;\n\n    if (guiView && content) {\n      return (\n        <div className=\"content-body\">\n          <DataGUI\n            fields={content}\n            slug={slug}\n            ext={ext}\n            onChange={onDataFileChanged}\n            ref=\"gui\"\n          />\n        </div>\n      );\n    } else if (!guiView && raw_content) {\n      return (\n        <div className=\"content-body\">\n          <InputPath\n            onChange={onDataFileChanged}\n            type=\"data files\"\n            path={filename}\n            ref=\"inputpath\"\n          />\n          <Editor\n            editorChanged={datafileChanged}\n            onEditorChange={onDataFileChanged}\n            content={raw_content}\n            type={ext}\n            ref=\"editor\"\n          />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const { datafile, isFetching, params, errors } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    if (_.isEmpty(datafile.content)) {\n      return <h1>{getNotFoundMessage('content')}</h1>;\n    }\n\n    const directory = params.splat[0];\n    const filename = getFilenameFromPath(datafile.path);\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const document_title = getDocumentTitle('data files', directory, filename);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"datafiles\" splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            {this.renderContentBody(filename)}\n            {this.renderAside()}\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDataFileEdit.propTypes = {\n  fetchDataFile: PropTypes.func.isRequired,\n  putDataFile: PropTypes.func.isRequired,\n  deleteDataFile: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  datafile: PropTypes.object.isRequired,\n  onDataFileChanged: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  datafileChanged: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  datafile: state.datafiles.currentFile,\n  isFetching: state.datafiles.isFetching,\n  updated: state.datafiles.updated,\n  datafileChanged: state.datafiles.datafileChanged,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDataFile,\n      putDataFile,\n      deleteDataFile,\n      onDataFileChanged,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DataFileEdit)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\nimport DataGUI from '../../components/DataGUI';\nimport Errors from '../../components/Errors';\nimport Editor from '../../components/Editor';\nimport Button from '../../components/Button';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputPath from '../../components/form/InputPath';\nimport { clearErrors } from '../../ducks/utils';\nimport { putDataFile, onDataFileChanged } from '../../ducks/datafiles';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class DataFileNew extends Component {\n  state = {\n    guiView: false,\n  };\n\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      browserHistory.push(\n        `${ADMIN_PREFIX}/datafiles/${nextProps.datafile.relative_path}`\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (!this.state.guiView && this.props.datafileChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  toggleView = () => {\n    this.setState(state => {\n      return { guiView: !state.guiView };\n    });\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { datafileChanged, fieldChanged, putDataFile, params } = this.props;\n    let filename;\n\n    if (datafileChanged || fieldChanged) {\n      if (this.state.guiView) {\n        const { filepath, extname } = this.refs.gui.refs;\n        filename = filepath.value + extname.value;\n        putDataFile(params.splat, filename, null, null, 'gui');\n      } else {\n        filename = this.refs.inputpath.refs.input.value;\n        putDataFile(params.splat, filename, this.refs.editor.getValue());\n      }\n    }\n  };\n\n  renderAside() {\n    const { datafileChanged, fieldChanged, updated } = this.props;\n\n    return (\n      <div className=\"content-side\">\n        <Button\n          onClick={this.handleClickSave}\n          type=\"create\"\n          active={datafileChanged || fieldChanged}\n          triggered={updated}\n          block\n        />\n        <Button\n          onClick={this.toggleView}\n          type=\"view-toggle\"\n          triggered={this.state.guiView}\n          active\n          block\n        />\n      </div>\n    );\n  }\n\n  renderContentBody() {\n    const { datafileChanged, onDataFileChanged } = this.props;\n\n    if (this.state.guiView) {\n      return (\n        <div className=\"content-body\">\n          <DataGUI onChange={onDataFileChanged} ref=\"gui\" />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"content-body\">\n        <InputPath\n          onChange={onDataFileChanged}\n          type=\"data files\"\n          path=\"\"\n          ref=\"inputpath\"\n        />\n        <Editor\n          editorChanged={datafileChanged}\n          onEditorChange={onDataFileChanged}\n          content=\"\"\n          ref=\"editor\"\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { errors, params } = this.props;\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const title = getDocumentTitle('data files', params.splat, 'New data file');\n\n    return (\n      <DocumentTitle title={title}>\n        <HotKeys handlers={keyboardHandlers}>\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"datafiles\" splat={params.splat} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            {this.renderContentBody()}\n            {this.renderAside()}\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDataFileNew.propTypes = {\n  putDataFile: PropTypes.func.isRequired,\n  datafile: PropTypes.object.isRequired,\n  onDataFileChanged: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  updated: PropTypes.bool.isRequired,\n  datafileChanged: PropTypes.bool.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  fieldChanged: PropTypes.bool,\n};\n\nconst mapStateToProps = state => ({\n  datafile: state.datafiles.currentFile,\n  updated: state.datafiles.updated,\n  datafileChanged: state.datafiles.datafileChanged,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      putDataFile,\n      onDataFileChanged,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DataFileNew)\n);\n","import _ from 'underscore';\nimport { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { PUT_DOCUMENT_SUCCESS, PUT_DOCUMENT_FAILURE } from './collections';\nimport { get, put, del } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { slugify, trimObject, computeRelativePath } from '../utils/helpers';\nimport { draftsAPIUrl, draftAPIUrl, documentAPIUrl } from '../constants/api';\n\nimport translations from '../translations';\nconst { getTitleRequiredMessage, getFilenameNotValidMessage } = translations;\n\nexport const FETCH_DRAFTS_REQUEST = 'FETCH_DRAFTS_REQUEST';\nexport const FETCH_DRAFTS_SUCCESS = 'FETCH_DRAFTS_SUCCESS';\nexport const FETCH_DRAFTS_FAILURE = 'FETCH_DRAFTS_FAILURE';\n\nexport const FETCH_DRAFT_REQUEST = 'FETCH_DRAFT_REQUEST';\nexport const FETCH_DRAFT_SUCCESS = 'FETCH_DRAFT_SUCCESS';\nexport const FETCH_DRAFT_FAILURE = 'FETCH_DRAFT_FAILURE';\n\nexport const PUT_DRAFT_REQUEST = 'PUT_DRAFT_REQUEST';\nexport const PUT_DRAFT_SUCCESS = 'PUT_DRAFT_SUCCESS';\nexport const PUT_DRAFT_FAILURE = 'PUT_DRAFT_FAILURE';\n\nexport const DELETE_DRAFT_REQUEST = 'DELETE_DRAFT_REQUEST';\nexport const DELETE_DRAFT_SUCCESS = 'DELETE_DRAFT_SUCCESS';\nexport const DELETE_DRAFT_FAILURE = 'DELETE_DRAFT_FAILURE';\n\nexport const fetchDrafts = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_DRAFTS_REQUEST });\n  return get(\n    draftsAPIUrl(directory),\n    { type: FETCH_DRAFTS_SUCCESS, name: 'drafts' },\n    { type: FETCH_DRAFTS_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchDraft = (directory, filename) => dispatch => {\n  dispatch({ type: FETCH_DRAFT_REQUEST });\n  return get(\n    draftAPIUrl(directory, filename),\n    { type: FETCH_DRAFT_SUCCESS, name: 'draft' },\n    { type: FETCH_DRAFT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putDraft = (mode, directory, filename = '') => (\n  dispatch,\n  getState\n) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n\n  // if path is not given or equals to directory, generate filename from the title\n  if (!path && title) {\n    path = `${slugify(title)}.md`;\n  } else if (!path && !title) {\n    return dispatch(validationError(validateDraft(metadata)));\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n\n  let payload;\n  if (mode === 'create') {\n    // strip '_drafts/' from path when provided\n    filename = path.replace('_drafts/', '');\n    payload = { front_matter, raw_content };\n  } else {\n    let writePath = directory\n      ? `_drafts/${directory}/${path}`\n      : `_drafts/${path}`;\n    payload = { path: writePath, front_matter, raw_content };\n  }\n\n  //send the put request\n  return put(\n    draftAPIUrl(directory, filename),\n    preparePayload(payload),\n    { type: PUT_DRAFT_SUCCESS, name: 'draft' },\n    { type: PUT_DRAFT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deleteDraft = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    draftAPIUrl(directory, filename),\n    { type: DELETE_DRAFT_SUCCESS, name: 'draft', id: relative_path },\n    { type: DELETE_DRAFT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const publishDraft = (directory, filename) => (dispatch, getState) => {\n  const metadata = getState().metadata.metadata;\n  const { raw_content } = metadata;\n\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n\n  return put(\n    documentAPIUrl('posts', directory, filename),\n    preparePayload({ raw_content, front_matter }),\n    { type: PUT_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: PUT_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst validateDraft = metadata =>\n  validator(\n    metadata,\n    { path: 'required|filename' },\n    {\n      'path.required': getTitleRequiredMessage(),\n      'path.filename': getFilenameNotValidMessage(),\n    }\n  );\n\nconst preparePayload = obj => JSON.stringify(trimObject(obj));\n\nexport default function drafts(\n  state = {\n    drafts: [],\n    draft: {},\n    isFetching: false,\n    updated: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_DRAFTS_REQUEST:\n    case FETCH_DRAFT_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_DRAFTS_SUCCESS:\n      return {\n        ...state,\n        drafts: action.drafts,\n        isFetching: false,\n        draft: {},\n      };\n    case FETCH_DRAFTS_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n        drafts: [],\n      };\n    case FETCH_DRAFT_SUCCESS:\n      return {\n        ...state,\n        draft: action.draft,\n        isFetching: false,\n      };\n    case FETCH_DRAFT_FAILURE:\n      return {\n        ...state,\n        draft: {},\n        isFetching: false,\n      };\n    case PUT_DRAFT_SUCCESS:\n      return {\n        ...state,\n        draft: action.draft,\n        updated: true,\n      };\n    case DELETE_DRAFT_SUCCESS:\n      return {\n        ...state,\n        drafts: filterDeleted(state.drafts, action.id),\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n      };\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Explorer from '../../components/Explorer';\nimport { search, filterBySearchInput } from '../../ducks/utils';\nimport { fetchDrafts, deleteDraft } from '../../ducks/drafts';\nimport { getDocumentTitle } from '../../utils/helpers';\n\nexport class Drafts extends Component {\n  componentDidMount() {\n    const { fetchDrafts, params } = this.props;\n    fetchDrafts(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchDrafts } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchDrafts(nextProps.params.splat);\n    }\n  }\n\n  render() {\n    const { isFetching, drafts, search, params, deleteDraft } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const title = getDocumentTitle('drafts', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <Explorer\n          type=\"drafts\"\n          items={drafts}\n          params={params}\n          newBtnLabel=\"New draft\"\n          search={search}\n          deleteItem={deleteDraft}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDrafts.propTypes = {\n  drafts: PropTypes.array.isRequired,\n  fetchDrafts: PropTypes.func.isRequired,\n  deleteDraft: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  drafts: filterBySearchInput(state.drafts.drafts, state.utils.input),\n  isFetching: state.drafts.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDrafts,\n      deleteDraft,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Drafts);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport _ from 'underscore';\nimport moment from 'moment';\nimport DocumentTitle from 'react-document-title';\nimport Button from '../../components/Button';\nimport Errors from '../../components/Errors';\nimport Splitter from '../../components/Splitter';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport MarkdownPageBody from '../../components/MarkdownPageBody';\nimport {\n  fetchDraft,\n  deleteDraft,\n  putDraft,\n  publishDraft,\n} from '../../ducks/drafts';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst {\n  getLeaveMessage,\n  getDeleteMessage,\n  getPublishDraftMessage,\n} = translations;\n\nexport class DraftEdit extends Component {\n  componentDidMount() {\n    const { fetchDraft, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    fetchDraft(directory, filename);\n\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.draft.path;\n      const path = this.props.draft.path;\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(\n          `${ADMIN_PREFIX}/drafts/${nextProps.draft.relative_path}`\n        );\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { putDraft, fieldChanged, params } = this.props;\n    if (fieldChanged) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      putDraft('edit', directory, filename);\n    }\n  };\n\n  handleClickPublish(path) {\n    const { deleteDraft, publishDraft, params } = this.props;\n\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    const today = moment().format('YYYY-MM-DD');\n    const datedfilename = `${today}-${filename}`;\n    const postPath = directory\n      ? `_posts/${directory}/${datedfilename}`\n      : `_posts/${datedfilename}`;\n\n    const confirm = window.confirm(getPublishDraftMessage(path, postPath));\n    if (confirm) {\n      const goTo = directory ? `/${directory}` : '';\n      deleteDraft(directory, filename);\n      publishDraft(directory, datedfilename);\n      browserHistory.push(`${ADMIN_PREFIX}/drafts${goTo}`);\n    }\n  }\n\n  handleClickDelete(name) {\n    const { deleteDraft, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(name));\n    if (confirm) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      const goTo = directory ? `/${directory}` : '';\n      deleteDraft(directory, filename);\n      browserHistory.push(`${ADMIN_PREFIX}/drafts${goTo}`);\n    }\n  }\n\n  render() {\n    const {\n      isFetching,\n      draft,\n      errors,\n      updateTitle,\n      updateBody,\n      updatePath,\n      updated,\n      fieldChanged,\n      params,\n    } = this.props;\n\n    if (isFetching) {\n      return null;\n    } else if (_.isEmpty(draft)) {\n      return <h1>Could not find the draft.</h1>;\n    }\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const {\n      name,\n      path,\n      raw_content,\n      http_url,\n      front_matter,\n      front_matter_defaults,\n    } = draft;\n    const directory = params.splat[0];\n    const title = front_matter && front_matter.title ? front_matter.title : '';\n    const document_title = getDocumentTitle('drafts', directory, title || name);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"drafts\" splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            <MarkdownPageBody\n              type=\"drafts\"\n              path={name}\n              title={title}\n              body={raw_content}\n              updatePath={updatePath}\n              updateBody={updateBody}\n              updateTitle={updateTitle}\n              onSave={this.handleClickSave}\n              metafields={{ title, raw_content, path: name, ...front_matter }}\n              staticmetafields={front_matter_defaults}\n            />\n            <div className=\"content-side\">\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={fieldChanged}\n                triggered={updated}\n                block\n              />\n              <Button to={http_url} type=\"view\" active block />\n              <Splitter />\n              <Button\n                onClick={() => this.handleClickPublish(path)}\n                type=\"publish\"\n                active\n                block\n              />\n              <Button\n                onClick={() => this.handleClickDelete(name)}\n                type=\"delete\"\n                active\n                block\n              />\n            </div>\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDraftEdit.propTypes = {\n  draft: PropTypes.object.isRequired,\n  fetchDraft: PropTypes.func.isRequired,\n  deleteDraft: PropTypes.func.isRequired,\n  putDraft: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  publishDraft: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  draft: state.drafts.draft,\n  isFetching: state.drafts.isFetching,\n  fieldChanged: state.metadata.fieldChanged,\n  updated: state.drafts.updated,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDraft,\n      deleteDraft,\n      putDraft,\n      publishDraft,\n      updateTitle,\n      updateBody,\n      updatePath,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DraftEdit)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport DocumentTitle from 'react-document-title';\nimport CreateMarkdownPage from '../../components/CreateMarkdownPage';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { putDraft } from '../../ducks/drafts';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class DraftNew extends Component {\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      browserHistory.push(\n        `${ADMIN_PREFIX}/drafts/${nextProps.draft.relative_path}`\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { fieldChanged, putDraft, params } = this.props;\n    fieldChanged && putDraft('create', params.splat);\n  };\n\n  render() {\n    const {\n      params,\n      config,\n      errors,\n      updated,\n      updateBody,\n      updatePath,\n      updateTitle,\n      fieldChanged,\n    } = this.props;\n\n    const title = getDocumentTitle('drafts', params.splat, 'New draft');\n\n    return (\n      <DocumentTitle title={title}>\n        <CreateMarkdownPage\n          type=\"drafts\"\n          params={params}\n          config={config}\n          errors={errors}\n          updated={updated}\n          updateBody={updateBody}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          fieldChanged={fieldChanged}\n          onClickSave={this.handleClickSave}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDraftNew.propTypes = {\n  putDraft: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  config: PropTypes.object.isRequired,\n  draft: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  draft: state.drafts.draft,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n  updated: state.drafts.updated,\n  config: state.config.config,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      updateTitle,\n      updateBody,\n      updatePath,\n      putDraft,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DraftNew)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\nimport ReactDropzone from 'react-dropzone';\nimport FilePreview from './FilePreview';\nimport Splitter from './Splitter';\nimport Icon from './Icon';\n\nexport class Dropzone extends Component {\n  openDropzone() {\n    this.refs.ReactDropzone.open();\n  }\n\n  render() {\n    const { files, splat, onDrop, onClickDelete, onClickItem } = this.props;\n    return (\n      <ReactDropzone\n        onDrop={onDrop}\n        ref=\"ReactDropzone\"\n        className=\"dropzone\"\n        activeClassName=\"dropzone-active\"\n        multiple\n        disableClick\n      >\n        {files.length ? (\n          <div className=\"preview-container\">\n            {_.map(files, (file, i) => (\n              <FilePreview\n                key={i}\n                onClick={onClickItem}\n                onClickDelete={onClickDelete}\n                splat={splat}\n                file={file}\n              />\n            ))}\n            <Splitter />\n            <div className=\"preview-tip\">\n              <div>Drag and drop file(s) here to upload</div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"preview-info\">\n            <Icon name=\"upload\" />\n            <p>Drag and drop file(s) here to upload</p>\n          </div>\n        )}\n      </ReactDropzone>\n    );\n  }\n}\n\nDropzone.propTypes = {\n  files: PropTypes.array.isRequired,\n  splat: PropTypes.string.isRequired,\n  onDrop: PropTypes.func.isRequired,\n  onClickDelete: PropTypes.func.isRequired,\n  onClickItem: PropTypes.func,\n};\n\nexport default Dropzone;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Dropzone from '../../components/Dropzone';\nimport Button from '../../components/Button';\nimport Icon from '../../components/Icon';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputSearch from '../../components/form/InputSearch';\nimport { search } from '../../ducks/utils';\nimport {\n  existingUploadedFilenames,\n  getDocumentTitle,\n} from '../../utils/helpers';\nimport {\n  fetchStaticFiles,\n  uploadStaticFiles,\n  deleteStaticFile,\n  filterByFilename,\n} from '../../ducks/staticfiles';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getOverrideMessage } = translations;\n\nexport class StaticFiles extends Component {\n  componentDidMount() {\n    const { fetchStaticFiles, params } = this.props;\n    fetchStaticFiles(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchStaticFiles } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchStaticFiles(nextProps.params.splat);\n    }\n  }\n\n  onDrop(uploadedFiles) {\n    const { uploadStaticFiles, files, params } = this.props;\n    const existingFiles = existingUploadedFilenames(uploadedFiles, files);\n    if (existingFiles.length > 0) {\n      const confirm = window.confirm(\n        getOverrideMessage(existingFiles.join(', '))\n      );\n      if (!confirm) {\n        return false;\n      }\n    }\n    uploadStaticFiles(params.splat, uploadedFiles);\n  }\n\n  openDropzone = () => {\n    this.refs.dropzone.openDropzone();\n  };\n\n  renderFilePreviewRow(static_files, key) {\n    const { params, onClickStaticFile, deleteStaticFile } = this.props;\n    return (\n      <tr key={key}>\n        <td>\n          <Dropzone\n            ref=\"dropzone\"\n            splat={params.splat || ''}\n            files={static_files}\n            onClickItem={onClickStaticFile}\n            onClickDelete={deleteStaticFile}\n            onDrop={static_files => this.onDrop(static_files)}\n          />\n        </td>\n      </tr>\n    );\n  }\n\n  renderDirectoryRow(directory, index) {\n    const { name, path } = directory;\n    const to = `${ADMIN_PREFIX}/staticfiles/${path}`;\n    return (\n      <tr key={index}>\n        <td className=\"row-title\">\n          <strong>\n            <Link to={to}>\n              <Icon name=\"folder\" />\n              {name}\n            </Link>\n          </strong>\n        </td>\n      </tr>\n    );\n  }\n\n  renderRows() {\n    const { files } = this.props;\n    const dirs = files.filter(entity => entity.type === 'directory');\n    const static_files = files.filter(entity => !entity.type);\n\n    return dirs\n      .map((entry, index) => this.renderDirectoryRow(entry, index))\n      .concat(this.renderFilePreviewRow(static_files, dirs.length + 1));\n  }\n\n  renderTable() {\n    return (\n      <div className=\"content-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Directory Contents</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderRows()}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  render() {\n    const { isFetching, params, search } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const to = `${ADMIN_PREFIX}/staticfiles/index`;\n    const title = getDocumentTitle('static files', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <div>\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"staticfiles\" splat={params.splat} />\n            <div className=\"page-buttons multiple\">\n              <Link className=\"btn btn-view\" to={to}>\n                Index Listing\n              </Link>\n              <Button\n                onClick={() => this.openDropzone()}\n                type=\"upload\"\n                active\n              />\n            </div>\n            <div className=\"pull-right\">\n              <InputSearch searchBy=\"filename\" search={search} />\n            </div>\n          </div>\n          {this.renderTable()}\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n\nStaticFiles.propTypes = {\n  files: PropTypes.array.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  fetchStaticFiles: PropTypes.func.isRequired,\n  uploadStaticFiles: PropTypes.func.isRequired,\n  deleteStaticFile: PropTypes.func.isRequired,\n  onClickStaticFile: PropTypes.func,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  files: filterByFilename(state.staticfiles.files, state.utils.input),\n  isFetching: state.staticfiles.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchStaticFiles,\n      uploadStaticFiles,\n      deleteStaticFile,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StaticFiles);\n","import React from 'react';\n\nconst NotFound = () => (\n  <div className=\"notfound\">\n    <img src={require('../../assets/images/logo-black-red.png')} alt=\"Jekyll Admin\" />\n    <h1>Huh. It seems that page is Hyde-ing...</h1>\n    <h2>The resource you requested was not found.</h2>\n  </div>\n);\n\nexport default NotFound;\n","import React from 'react';\nimport { Route, IndexRoute } from 'react-router';\nimport { ADMIN_PREFIX } from './constants';\n\nimport App from './containers/App';\nimport Configuration from './containers/views/Configuration';\nimport Pages from './containers/views/Pages';\nimport PageEdit from './containers/views/PageEdit';\nimport PageNew from './containers/views/PageNew';\nimport Documents from './containers/views/Documents';\nimport DocumentEdit from './containers/views/DocumentEdit';\nimport DocumentNew from './containers/views/DocumentNew';\nimport DataFiles from './containers/views/DataFiles';\nimport DataFileEdit from './containers/views/DataFileEdit';\nimport DataFileNew from './containers/views/DataFileNew';\nimport Drafts from './containers/views/Drafts';\nimport DraftEdit from './containers/views/DraftEdit';\nimport DraftNew from './containers/views/DraftNew';\nimport StaticFiles from './containers/views/StaticFiles';\nimport StaticIndex from './containers/views/StaticIndex';\nimport NotFound from './containers/views/NotFound';\n\nexport default (\n  <Route path={`${ADMIN_PREFIX}`} component={App}>\n    <IndexRoute component={Pages} />\n    <Route path=\"configuration\" component={Configuration} />\n    <Route path=\"pages\">\n      <IndexRoute component={Pages} />\n      <Route path=\"(**/)new\" component={PageNew} />\n      <Route path=\"(**/)*.*\" component={PageEdit} />\n      <Route path=\"**\" component={Pages} />\n    </Route>\n    <Route path=\"collections\">\n      <Route path=\":collection_name\">\n        <IndexRoute component={Documents} />\n        <Route path=\"(**/)new\" component={DocumentNew} />\n        <Route path=\"(**/)*.*\" component={DocumentEdit} />\n        <Route path=\"**\" component={Documents} />\n      </Route>\n    </Route>\n    <Route path=\"drafts\">\n      <IndexRoute component={Drafts} />\n      <Route path=\"(**/)new\" component={DraftNew} />\n      <Route path=\"(**/)*.*\" component={DraftEdit} />\n      <Route path=\"**\" component={Drafts} />\n    </Route>\n    <Route path=\"datafiles\">\n      <IndexRoute component={DataFiles} />\n      <Route path=\"(**/)new\" component={DataFileNew} />\n      <Route path=\"(**/)*.*\" component={DataFileEdit} />\n      <Route path=\"**\" component={DataFiles} />\n    </Route>\n    <Route path=\"staticfiles\">\n      <IndexRoute component={StaticFiles} />\n      <Route path=\"index\" component={StaticIndex} />\n      <Route path=\"**\" component={StaticFiles} />\n    </Route>\n    <Route path={`${ADMIN_PREFIX}/*`} component={NotFound} />\n  </Route>\n);\n","import { combineReducers } from 'redux';\nimport { routerReducer } from 'react-router-redux';\n\nimport config from './config';\nimport pages from './pages';\nimport collections from './collections';\nimport metadata from './metadata';\nimport drafts from './drafts';\nimport datafiles from './datafiles';\nimport staticfiles from './staticfiles';\nimport utils from './utils';\nimport siteMeta from './siteMeta';\nimport notifications from './notifications';\n\nexport default combineReducers({\n  routing: routerReducer,\n  meta: siteMeta,\n  config,\n  pages,\n  collections,\n  metadata,\n  drafts,\n  datafiles,\n  staticfiles,\n  utils,\n  notifications,\n});\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport reduxImmutableStateInvariant from 'redux-immutable-state-invariant';\nimport thunk from 'redux-thunk';\nimport createLogger from 'redux-logger';\nimport rootReducer from './ducks';\n\nconst logger = createLogger();\n\nconst configureStoreProd = initialState => {\n  const middlewares = [thunk];\n\n  return createStore(\n    rootReducer,\n    initialState,\n    compose(applyMiddleware(...middlewares))\n  );\n};\n\nconst configureStoreDev = initialState => {\n  const middlewares = [reduxImmutableStateInvariant(), thunk, logger];\n\n  const composeEnhancers =\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(\n    rootReducer,\n    initialState,\n    composeEnhancers(applyMiddleware(...middlewares))\n  );\n\n  if (module.hot) {\n    module.hot.accept('./ducks', () => {\n      const nextReducer = require('./ducks').default;\n      store.replaceReducer(nextReducer);\n    });\n  }\n\n  return store;\n};\n\nconst configureStore =\n  process.env.NODE_ENV === 'production'\n    ? configureStoreProd\n    : configureStoreDev;\n\nexport default configureStore;\n","/* eslint-disable import/default */\nimport React from 'react';\nimport { syncHistoryWithStore } from 'react-router-redux';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router, browserHistory, Redirect } from 'react-router';\nimport routes from './routes';\nimport configureStore from './store';\nimport { ADMIN_PREFIX } from './constants';\nimport './styles/main.scss';\n\nconst store = configureStore();\nconst history = syncHistoryWithStore(browserHistory, store);\n\nrender(\n  <Provider store={store}>\n    <Router history={history} routes={routes}>\n      <Redirect from={`${ADMIN_PREFIX}/`} to={`${ADMIN_PREFIX}/pages/`} />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}